(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[23],{420:function(t,e,i){"use strict";i.r(e);var a,n,r,o,p,d,m=i(20),c=i(4),x=i(21),l=i(5),h=i(43),s=i(44),f=i(9),b=i(0),w=i(86),u=["title","titleId"];function g(){return(g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function j(t,e){if(null==t)return{};var i,a,n=function(t,e){if(null==t)return{};var i,a,n={},r=Object.keys(t);for(a=0;a<r.length;a++)i=r[a],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)i=r[a],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function O(t,e){var i=t.title,m=t.titleId,c=j(t,u);return b.createElement("svg",g({id:"b4a22bbc-cdd2-437b-b229-3a26676ab455","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 735.26 370",ref:e,"aria-labelledby":m},c),i?b.createElement("title",{id:m},i):null,a||(a=b.createElement("path",{d:"M497,370H15A15,15,0,0,1,0,355V15A15,15,0,0,1,15,0H497a15,15,0,0,1,15,15V355A15,15,0,0,1,497,370Z",fill:"#f79b00"})),n||(n=b.createElement("path",{d:"M497,0H256V370H497a15,15,0,0,0,15-15V15A15,15,0,0,0,497,0Z",fill:"#f28300"})),r||(r=b.createElement("path",{d:"M512,15A15,15,0,0,0,497,0H15A15,15,0,0,0,0,15v7.78L247.35,197.26a15,15,0,0,0,17.3,0L512,22.78Z",fill:"#fbb200"})),o||(o=b.createElement("path",{d:"M146.6,310H75a15,15,0,0,1,0-30h71.6a15,15,0,1,1,0,30Z",fill:"#fffff2"})),p||(p=b.createElement("path",{d:"M497,0H256V200a15,15,0,0,0,8.65-2.74L512,22.78V15A15,15,0,0,0,497,0Z",fill:"#f79b00"})),d||(d=b.createElement("polygon",{points:"630.99 85.73 606.4 110.32 686.08 190 606.4 269.68 630.99 294.27 735.26 190 630.99 85.73",fill:"#fff"})))}var v,y=b.forwardRef(O),C=(i.p,["title","titleId"]);function z(){return(z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function _(t,e){if(null==t)return{};var i,a,n=function(t,e){if(null==t)return{};var i,a,n={},r=Object.keys(t);for(a=0;a<r.length;a++)i=r[a],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)i=r[a],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function I(t,e){var i=t.title,a=t.titleId,n=_(t,C);return b.createElement("svg",z({id:"e5d591a6-4fca-4d72-9ccc-c114fcffa51f","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 384",ref:e,"aria-labelledby":a},n),i?b.createElement("title",{id:a},i):null,v||(v=b.createElement("path",{d:"M0,208.34,175.33,384,512,47.67,463.67,0,175.33,288,47.66,160.33Z",fill:"#fff"})))}var S=b.forwardRef(I),N=(i.p,i(6)),T=i(173),k=i(114),E=i(115),R=i(78),M=i(1),A=Object(l.d)(T.a).withConfig({displayName:"CartaTimer__CoronaSvg",componentId:"sc-1z12nby-0"})(["",""],R.a),D=Object(l.d)(k.a).withConfig({displayName:"CartaTimer__CorazonSvg",componentId:"sc-1z12nby-1"})(["",""],R.a),P=Object(l.d)(E.a).withConfig({displayName:"CartaTimer__CorazonGreenSvg",componentId:"sc-1z12nby-2"})(["",""],R.a),H=l.d.div.withConfig({displayName:"CartaTimer__CartaTimerDiv",componentId:"sc-1z12nby-3"})(["position:relative;@media (min-width:2560px){margin:25px 16px !important;}@media (min-height:1000px) and (max-width:767px){margin:25px 16px !important;}"," .email-arrow{@media (min-width:2560px){width:64px !important;}@media (min-height:1000px) and (max-width:767px){width:64px !important;}"," position:absolute;height:auto;top:25%;left:50%;transform:translate(-50%,20%);}"],{margin:"15px 12px","@media (min-width: 768px)":{margin:"8px 4px"},"@media (min-width: 1024px)":{margin:"12px 4px"},"@media (min-width: 1280px)":{margin:"12px 4px"},"@media (min-width: 1536px)":{margin:"24px 4px"}},{width:"26px","@media (min-width: 768px)":{width:"16px"},"@media (min-width: 1024px)":{width:"20px"},"@media (min-width: 1280px)":{width:"24px"},"@media (min-width: 1536px)":{width:"28px"}}),B=l.d.div.withConfig({displayName:"CartaTimer__CartaContent",componentId:"sc-1z12nby-4"})(["@media (min-width:2560px){width:320px !important;padding:28px 8px 16px 8px !important;}@media (min-height:1000px) and (max-width:767px){width:320px !important;padding:28px 8px 16px 8px !important;}"," display:flex;justify-content:space-between;align-items:center;"],{padding:"12px 8px 8px 8px",width:"200px","@media (min-width: 768px)":{padding:"10px 2px 4px 2px",width:"110px"},"@media (min-width: 1024px)":{padding:"10px 2px 4px 2px",width:"130px"},"@media (min-width: 1280px)":{padding:"14px 6px 12px 6px",width:"175px"},"@media (min-width: 1536px)":{padding:"14px 4px 8px 4px",width:"195px"}}),V=l.d.svg.withConfig({displayName:"CartaTimer__TimerSvg",componentId:"sc-1z12nby-5"})(["position:absolute;width:100%;height:100%;.timer-track{stroke:",";stroke-width:1px;width:calc(100% - 4px);height:calc(100% - 4px);}.timer-progreso{width:calc(100% - 4px);height:calc(100% - 4px);stroke:",";@media (min-width:2560px){stroke-width:4px !important;}@media (min-height:1000px) and (max-width:767px){stroke-width:4px !important;}"," stroke-dasharray:"," ",";}"],(function(t){var e=t.porcentaje;return e>66?"#1a2480":e>33?"#7e801a":"#801a1a"}),(function(t){var e=t.porcentaje;return e>66?"#3347ff":e>33?"#fcff33":"#ff3333"}),{stroke:"1px","@media (min-width: 1024px)":{stroke:"2px"},"@media (min-width: 1280px)":{stroke:"3px"}},(function(t){return t.perimetro}),(function(t){return t.perimetro})),Z=l.d.span.withConfig({displayName:"CartaTimer__Tiempo",componentId:"sc-1z12nby-6"})(["@media (min-width:2560px){font-size:0.75rem !important;left:24px !important;top:-24px !important;}@media (min-height:1000px) and (max-width:767px){font-size:0.75rem !important;left:24px !important;top:-24px !important;}position:absolute;color:white;"," font-weight:300;"],{fontSize:"0.3rem",top:"-6px",left:"6px","@media (min-width: 768px)":{fontSize:"0.25rem",top:"-6px",left:"6px"},"@media (min-width: 1024px)":{fontSize:"0.32rem",top:"-10px",left:"10px"},"@media (min-width: 1280px)":{fontSize:"0.5rem",top:"-15px",left:"15px"},"@media (min-width: 1536px)":{fontSize:"0.6rem",top:"-18px",left:"18px"}}),F=Object(l.d)(S).withConfig({displayName:"CartaTimer__CheckMarkSvg",componentId:"sc-1z12nby-7"})(["@media (min-width:2560px){top:-22px !important;left:73px !important;width:12px !important;}@media (min-height:1000px) and (max-width:767px){top:-22px !important;left:73px !important;width:12px !important;}",""],{left:"30px",top:"-5px",width:"6px",height:"auto",position:"absolute","@media (min-width: 768px)":{width:"4px"},"@media (min-width: 1024px)":{left:"34px",top:"-9px",width:"6px"},"@media (min-width: 1280px)":{left:"48px",top:"-12px",width:"8px"},"@media (min-width: 1536px)":{left:"58px",top:"-16px",width:"12px"}}),L=l.d.div.withConfig({displayName:"CartaTimer__PicDiv",componentId:"sc-1z12nby-8"})(["position:relative;"]),W=Object(l.d)(L).withConfig({displayName:"CartaTimer___StyledPicDiv",componentId:"sc-1z12nby-9"})(["",""],(function(t){return t._css2})),J=l.d.img.withConfig({displayName:"CartaTimer__Foto",componentId:"sc-1z12nby-10"})(["@media (min-width:2560px){width:64px !important;height:64px !important;}@media (min-height:1000px) and (max-width:767px){width:64px !important;height:64px !important;}"," border-radius:100%;border:2px solid #17171c;object-fit:cover;margin-bottom:10px;"],{width:"24px",height:"24px","@media (min-width: 768px)":{width:"20px",height:"20px"},"@media (min-width: 1024px)":{width:"24px",height:"24px"},"@media (min-width: 1280px)":{width:"28px",height:"28px"},"@media (min-width: 1536px)":{width:"32px",height:"32px"}}),G=l.d.span.withConfig({displayName:"CartaTimer__Nombre",componentId:"sc-1z12nby-11"})(["@media (min-width:2560px){font-size:0.75rem !important;}@media (min-height:1000px) and (max-width:767px){font-size:0.75rem !important;}"," font-weight:300;color:white;"],{fontSize:"0.25rem","@media (min-width: 768px)":{fontSize:"0.25rem"},"@media (min-width: 1024px)":{fontSize:"0.32rem"},"@media (min-width: 1280px)":{fontSize:"0.4rem"},"@media (min-width: 1536px)":{fontSize:"0.6rem"}}),q=l.d.div.withConfig({displayName:"CartaTimer__AvatarDiv",componentId:"sc-1z12nby-12"})(["@media (min-width:2560px){margin:0 24px !important;}@media (min-height:1000px) and (max-width:767px){margin:0 24px !important;}",""],{margin:"0 8px",display:"flex",flexDirection:"column",alignItems:"center","@media (min-width: 768px)":{margin:"0 8px"},"@media (min-width: 1024px)":{margin:"0 8px"},"@media (min-width: 1280px)":{margin:"0 12px"},"@media (min-width: 1536px)":{margin:"0 12px"}}),K=function(t){var e=t.perfilNombre,i=t.perfilFoto,a=t.corazones,n=t.clienteNombre,r=t.clienteFoto,o=void 0===r?w.a:r,p=t.coronas,d=t.clienteAmolatinaId,m=t.tiempoLlegada,c=(t.leida,t.respondida,t.timerDuracionMinutos),x=t.typeWidth,l=Object(b.useRef)(null),h=Object(b.useState)(0),s=Object(f.a)(h,2),u=s[0],g=s[1],j=Object(b.useState)(0),O=Object(f.a)(j,2),v=O[0],C=O[1],z=Object(b.useState)(Math.floor(m/60)+c-Math.floor(Date.now()/6e4)),_=Object(f.a)(z,2),I=_[0],S=_[1],T=Object(b.useState)(0),k=Object(f.a)(T,2),E=k[0],R=k[1],K=Object(b.useRef)(0),Q=Object(b.useState)([]),U=Object(f.a)(Q,2),X=U[0],Y=U[1],$=Object(b.useState)([]),tt=Object(f.a)($,2),et=tt[0],it=tt[1],at=Object(b.useState)(1),nt=Object(f.a)(at,2),rt=nt[0],ot=nt[1],pt=Object(b.useState)(100),dt=Object(f.a)(pt,2),mt=dt[0],ct=dt[1],xt=Object(b.useRef)(),lt=Object(N.useCopyTextOnClick)(xt,d);return Object(b.useEffect)((function(){Y("4k"===x?Object(N.organizadorRadial)(A,12,32,40,p,11.25):"2xl"===x?Object(N.organizadorRadial)(A,7,17,21,p,11.25):"xl"===x?Object(N.organizadorRadial)(A,5,14,16,p,11.25):"lg"===x?Object(N.organizadorRadial)(A,4,12,14,p,11.25):"md"===x?Object(N.organizadorRadial)(A,4,10,12,p,11.25):"sm"===x||""===x?Object(N.organizadorRadial)(A,4,12,14,20,11.25):"")}),[p,x]),Object(b.useEffect)((function(){var t=Object(N.reducirCorazones)(a,D,P),e=Object(f.a)(t,2),i=e[0],n=e[1];it("4k"===x?Object(N.organizadorRadial)(i,12,32,40,n,11.25):"2xl"===x?Object(N.organizadorRadial)(i,7,17,21,n,11.25):"xl"===x?Object(N.organizadorRadial)(i,5,14,16,n,11.25):"lg"===x?Object(N.organizadorRadial)(i,4,12,14,n,11.25):"md"===x?Object(N.organizadorRadial)(i,4,10,12,n,11.25):"sm"===x||""===x?Object(N.organizadorRadial)(i,4,12,14,n,11.25):"")}),[a,x]),Object(b.useEffect)((function(){return K.current=setInterval((function(){var t=Math.floor(m)+60*c-Math.floor(Date.now()/1e3);S(Math.floor(t/60)),R(t-60*Math.floor(t/60)),t<=0&&(clearInterval(K.current),S(0),R(0))}),333),function(){clearInterval(K.current)}}),[]),Object(b.useEffect)((function(){g(l.current.getBBox().width),C(l.current.getBBox().height),ot(2*(u-10)+2*(v-10)+2*Math.PI*5)}),[v,u]),Object(b.useEffect)((function(){ct((E+60*I)/(60*c)*100)}),[I,E,c]),!0,Object(M.jsxs)(H,{children:[Object(M.jsxs)(Z,{children:[I<10?"0".concat(I):I,":",E<10?"0".concat(E):E]}),Object(M.jsx)(F,{}),Object(M.jsxs)(V,{ref:l,porcentaje:mt,perimetro:rt,children:[Object(M.jsx)("rect",{className:"timer-track",x:2,y:2,rx:5,ry:5,fill:"none"}),Object(M.jsx)("rect",{className:"timer-progreso",x:2,y:2,rx:5,ry:5,fill:"none",strokeDashoffset:rt-rt/100*mt})]}),Object(M.jsxs)(B,{children:[Object(M.jsxs)(q,{children:[Object(M.jsxs)(W,{ref:xt,_css2:lt,children:[X,Object(M.jsx)(J,{src:null!==o&&void 0!==o?o:w.a,onError:function(t){var e=t.currentTarget;e.onerror=null,e.src=w.a}})]}),Object(M.jsx)(G,{children:n})]}),Object(M.jsx)(y,{className:"email-arrow"}),Object(M.jsxs)(q,{position:"right",children:[Object(M.jsxs)(L,{children:[et,Object(M.jsx)(J,{src:i})]}),Object(M.jsx)(G,{children:e})]})]})]})},Q=i(10),U=l.d.div.withConfig({displayName:"CartasAdminContainer__CartasDiv",componentId:"rb4u26-0"})(["@media (min-width:2560px){margin-top:2rem !important;}"," ",""],{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:"0.5rem","@media (min-width: 1024px)":{marginTop:"0.75rem"},"@media (min-width: 1280px)":{marginTop:"1.75rem"},"@media (min-width: 1536px)":{marginTop:"2rem"}},R.b),X=Object(l.d)(h.a).withConfig({displayName:"CartasAdminContainer___StyledContainer",componentId:"rb4u26-1"})(["",""],(function(t){return t._css})),Y=Object(l.d)(X).withConfig({displayName:"CartasAdminContainer___Styled_StyledContainer",componentId:"rb4u26-2"})({width:"100%",height:"100%",borderRadius:"0.75rem","@media (min-width: 1024px)":{borderRadius:"1rem"},"@media (min-width: 1536px)":{borderRadius:"1.3rem"}});e.default=function(t){var e,i=t.entidadSeleccionada,a=t.typeWidth,n=Object(Q.d)(["operadores"],N.fetchOperadores).data,r=function(t){var e=[];null===t||void 0===t||t.forEach((function(t){t.perfiles&&e.push.apply(e,Object(x.a)(t.perfiles))}));var i=e.map((function(t){return t.cartas.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{perfil:t,cliente:e.cliente,operadorId:t.operador.id})}))})).flat();return i.map((function(t){var e=t.id,i=t.read_timestamp,a=t.replied,n=t.timestamp,r=t.cliente,o=t.perfil,p=t.operadorId;return{id:e,perfilNombre:o.nombre,perfilFoto:o.foto,corazones:o.corazones,clienteNombre:r.nombre,clienteFoto:null===r||void 0===r?void 0:r.foto,coronas:r.coronas,clienteAmolatinaId:r.amolatinaId,tiempoLlegada:Math.floor(n/1e3),leida:!!i,respondida:a,operadorId:p}}))}(n);return Object(M.jsxs)(Y,{_css:["@media (min-width: 2560px) {border-radius: 2.5rem !important; }","@media (min-height: 1000px) and (max-width: 767px) { border-radius: 2.5rem !important; }"],children:[Object(M.jsx)(s.b,{position:"left",txt:"Cartas"}),Object(M.jsx)(U,{children:null===(e=r.filter((function(t){if("supervisor"!==i)return!0;var e,a=Object(m.a)(i.ids);try{for(a.s();!(e=a.n()).done;){var r=e.value;if((null===n||void 0===n?void 0:n.find((function(e){return e.id===t.operadorId})).supervisorId)===Number(r))return!0}}catch(o){a.e(o)}finally{a.f()}return!1})))||void 0===e?void 0:e.map((function(t){return Object(M.jsx)(K,Object(c.a)(Object(c.a)({typeWidth:a},t),{},{timerDuracionMinutos:30}),t.id)}))})]})}}}]);