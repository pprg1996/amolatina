(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[22],{408:function(t,e,i){"use strict";i.r(e);var n=i(9),o=i(1),a=i.n(o),d=i(8),r=i(86),c=i(6),l=i(0),s=i.n(l),u=i(10),p=i(80),m=i(41),b=i(5),f=i(2),h=function(){var t=Object(d.a)(a.a.mark((function t(e,i,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.customFetch)("/clients/info-client?id=".concat(n));case 2:return t.next=4,t.sent.data;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),g=function(){var t=Object(d.a)(a.a.mark((function t(e,i){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.customFetch)("/clients/translate-text?text=".concat(e,"&lang=").concat(i));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),v=function(){var t=Object(d.a)(a.a.mark((function t(e,i,n,o){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&n){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,Object(c.customFetch)("/clients/client-chat?clientId=".concat(i,"&profileId=").concat(n,"&page=").concat(o));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,i,n,o){return t.apply(this,arguments)}}(),j=b.d.input.withConfig({displayName:"ModalChat__Input",componentId:"sc-1fddwaj-0"})({appearance:"none",backgroundColor:"transparent",fontSize:"1rem",fontWeight:"500","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",marginLeft:"1rem",marginRight:"1rem",flex:"1 1 auto",borderBottomWidth:"2px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),w=Object(b.d)(j).withConfig({displayName:"ModalChat___StyledInput2",componentId:"sc-1fddwaj-1"})({width:"90%",marginTop:"8px"}),x=Object(b.d)(j).withConfig({displayName:"ModalChat___StyledInput",componentId:"sc-1fddwaj-2"})({width:"auto",cursor:"pointer"}),y=b.d.span.withConfig({displayName:"ModalChat__Fecha",componentId:"sc-1fddwaj-3"})(["@media (min-width:2560px){font-size:0.625em !important;}",""],{"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontSize:"0.3rem",letterSpacing:"0.08em",marginLeft:"1.5em",marginRight:"1.5em",fontWeight:"700","@media (min-width: 1024px)":{fontSize:"0.4rem"},"@media (min-width: 1280px)":{fontSize:"0.5rem"}}),_=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv",componentId:"sc-1fddwaj-4"})(["",""],(function(t){return t._css})),C=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv2",componentId:"sc-1fddwaj-5"})(["",""],(function(t){return t._css2})),O=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv3",componentId:"sc-1fddwaj-6"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(31, 31, 38, var(--tw-bg-opacity))",borderRadius:"1rem",padding:"0.5rem"}),S=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv4",componentId:"sc-1fddwaj-7"})(["",""],(function(t){return t._css3})),I=Object(b.d)("button").withConfig({displayName:"ModalChat___StyledButton",componentId:"sc-1fddwaj-8"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))",borderRadius:"1rem",padding:"0.25rem"}),k=function(t){var e,i,o,r,l,u,p=t.justify,b=t.data,h=s.a.useState(""===(null===b||void 0===b?void 0:b.text)&&(null===b||void 0===b||null===(e=b.meta)||void 0===e||null===(i=e.attachments[0])||void 0===i||null===(o=i.mediatype)||void 0===o?void 0:o.startsWith("image"))?"Imagen Enviada":"Voice message"===(null===b||void 0===b?void 0:b.text.trim())?"Nota de Voz":""),v=Object(n.a)(h,2),j=v[0],w=v[1],x=s.a.useState(!1),k=Object(n.a)(x,2),M=k[0],N=k[1],D=function(){var t=Object(d.a)(a.a.mark((function t(e){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.next=3,g(e,"en");case 3:if(i=t.sent,N(!1),"500"!==i){t.next=7;break}return t.abrupt("return",w(""));case 7:return t.abrupt("return",w(i));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=new Date(null===b||void 0===b?void 0:b.timestamp),B=R.getHours(),F=R.getDate();F=F<10?"0".concat(F):F;var W=R.getMinutes();W=W<10?"0".concat(W):W;var z=Object(c.mesDelYear)(R.getMonth()),A=R.getFullYear(),T=B<12?"am":"pm",L=""===(null===b||void 0===b?void 0:b.text)&&(null===b||void 0===b||null===(r=b.meta)||void 0===r||null===(l=r.attachments[0])||void 0===l||null===(u=l.mediatype)||void 0===u?void 0:u.startsWith("image"))?"Sent image":null===b||void 0===b?void 0:b.text;return Object(f.jsx)(_,{_css:[{display:"flex",marginTop:"0.25rem",marginBottom:"0.25rem",padding:"0.25rem",width:"100%"},"right"===p?{justifyContent:"flex-end"}:{justifyContent:"flex-start"}],children:Object(f.jsx)(C,{_css2:[{width:"50%",textAlign:"right",flexShrink:"1"},"right"===p?{textAlign:"right"}:{textAlign:"left"}],children:M?Object(f.jsx)(m.a,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(y,{children:[F," de ",z," del ",A," - ",B<13?B:B-12,":",W," ",T]}),Object(f.jsxs)(O,{children:[Object(f.jsx)("div",{children:""===j?L:j}),""===j?Object(f.jsx)(S,{_css3:["right"!==p?{textAlign:"right"}:{textAlign:"left"},{fontSize:"0.4rem",fontWeight:"700"}],children:Object(f.jsx)(I,{onClick:function(){return D(L)},children:"Traducir"})}):null]})]})})},null===b||void 0===b?void 0:b.id)},M=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv5",componentId:"sc-1fddwaj-9"})(["",""],(function(t){return t._css4})),N=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv6",componentId:"sc-1fddwaj-10"})({fontWeight:"700",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",width:"100%"}),D=Object(b.d)("img").withConfig({displayName:"ModalChat___StyledImg",componentId:"sc-1fddwaj-11"})({objectFit:"cover",borderRadius:"9999px",maxWidth:"50px",maxHeight:"50px","@media (min-width: 1536px)":{borderRadius:"1rem"}}),R=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv7",componentId:"sc-1fddwaj-12"})({display:"flex",alignItems:"center"}),B=Object(b.d)("img").withConfig({displayName:"ModalChat___StyledImg2",componentId:"sc-1fddwaj-13"})(["",""],(function(t){return t._css5})),F=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv8",componentId:"sc-1fddwaj-14"})(["",""],(function(t){return t._css6})),W=Object(b.d)("button").withConfig({displayName:"ModalChat___StyledButton2",componentId:"sc-1fddwaj-15"})(["",""],(function(t){return t._css7})),z=Object(b.d)("label").withConfig({displayName:"ModalChat___StyledLabel",componentId:"sc-1fddwaj-16"})({display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:"0.5rem",paddingRight:"0.5rem",gap:"0.5rem",borderBottomWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(31, 41, 55, var(--tw-border-opacity))",paddingTop:"0.5rem",paddingBottom:"0.5rem",cursor:"pointer"}),A=Object(b.d)("img").withConfig({displayName:"ModalChat___StyledImg3",componentId:"sc-1fddwaj-17"})(["",""],(function(t){return t._css8})),T=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv9",componentId:"sc-1fddwaj-18"})(["",""],(function(t){return t._css9})),L=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv10",componentId:"sc-1fddwaj-19"})({display:"flex",justifyContent:"center",marginTop:"0.25rem",marginBottom:"0.25rem",padding:"0.25rem",width:"100%"}),E=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv11",componentId:"sc-1fddwaj-20"})({width:"50%",textAlign:"center"}),V=Object(b.d)("button").withConfig({displayName:"ModalChat___StyledButton3",componentId:"sc-1fddwaj-21"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(76, 76, 63, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",padding:"0.5rem",borderRadius:"1rem"}),H=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv12",componentId:"sc-1fddwaj-22"})({display:"flex",justifyContent:"center",marginTop:"0.25rem",marginBottom:"0.25rem",padding:"0.25rem",width:"100%"}),J=Object(b.d)("div").withConfig({displayName:"ModalChat___StyledDiv13",componentId:"sc-1fddwaj-23"})({width:"50%",textAlign:"center"}),P=Object(b.d)("button").withConfig({displayName:"ModalChat___StyledButton4",componentId:"sc-1fddwaj-24"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(76, 76, 63, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",padding:"0.5rem",borderRadius:"1rem"});e.default=function(t){var e,i,o,a,d=t.clientid,l=t.setShowChat,g=s.a.useRef(),j=Object(u.d)(["clientes","client",d],h).data,y=s.a.useState(!1),_=Object(n.a)(y,2),C=_[0],O=_[1],S=s.a.useState(""),I=Object(n.a)(S,2),Y=I[0],X=I[1],q=s.a.useState(-1),G=Object(n.a)(q,2),K=G[0],Q=G[1],U=s.a.useState(1),Z=Object(n.a)(U,2),$=Z[0],tt=Z[1];if((null===j||void 0===j||null===(e=j.profiles)||void 0===e?void 0:e.length)>0&&(-1===+K||void 0===K)){var et,it,nt=null===j||void 0===j||null===(et=j.profiles)||void 0===et||null===(it=et[0])||void 0===it?void 0:it.profile_id;void 0!==nt&&Q(nt)}var ot=s.a.useCallback((function(){O(!1)}),[O]),at=null===j||void 0===j||null===(i=j.profiles)||void 0===i?void 0:i.find((function(t){return(null===t||void 0===t?void 0:t.profile_id)===K})),dt=Object(u.d)(["Chat",null===j||void 0===j?void 0:j.amolatinaId,null===at||void 0===at?void 0:at.amolatinaid,$],v),rt=dt.data,ct=dt.status;return(null===rt||void 0===rt?void 0:rt.length)<=50&&setTimeout((function(){var t=document.getElementById("ChatClient");t.scrollTop=t.scrollHeight}),250),Object(c.useClickOutside)(g,ot),Object(f.jsx)(r.a,{setShowModal:l,children:Object(f.jsxs)(M,{_css4:[{"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",width:"800px","@media (min-width: 768px)":{padding:"0.5rem",gap:"0.375rem"},"@media (min-width: 1024px)":{padding:"1rem",gap:"0.75rem"}},"@media (min-width: 2560px) { padding: 1rem !important; grid-gap: 0.75rem !important; width:1000px; }"],children:[Object(f.jsxs)(N,{children:[Object(f.jsx)(D,{alt:"Foto de ficha",src:Object(c.imageExists)(null===j||void 0===j?void 0:j.foto)}),Object(f.jsx)("span",{children:null===j||void 0===j?void 0:j.nombre}),Object(f.jsxs)(R,{onClick:function(t){t.stopPropagation(),O(!0!==C)},children:[Object(f.jsx)(B,{alt:"Foto de ficha",src:Object(c.imageExists)(null===at||void 0===at?void 0:at.photo),_css5:[{objectFit:"cover",borderRadius:"9999px",width:"50px",height:"50px"},0===+(null===at||void 0===at?void 0:at.astoken)?{"--tw-border-opacity":"1",borderColor:"rgba(220, 38, 38, var(--tw-border-opacity))",borderWidth:"4px"}:null]}),Object(f.jsx)("label",{children:Object(f.jsx)(x,{value:null!==(o=null===at||void 0===at?void 0:at.name)&&void 0!==o?o:"Sin Perfil",disabled:!0})})]}),Object(f.jsxs)(F,{ref:g,_css6:[{fontSize:"1rem",borderRadius:"1rem",display:"flex",alignItems:"center",flexDirection:"column",position:"fixed",top:"60px",right:"140px",padding:"0.5rem",width:"250px"},"background-color: rgba(31, 31, 38, var(--tw-bg-opacity)); z-index: 20; border: 1px solid #4c4c3f;",!1===C?"display:none;":"display:block;"],children:[Object(f.jsx)(w,{type:"text",placeholder:"Buscar",value:Y,onChange:function(t){return X(t.target.value)}}),null===j||void 0===j||null===(a=j.profiles)||void 0===a?void 0:a.filter((function(t){return t.name.toLowerCase().includes(Y.toLowerCase())})).map((function(t){return Object(f.jsx)(W,{onClick:function(e){var i;e.preventDefault(),i=null===t||void 0===t?void 0:t.profile_id,Q(i),O(!1),X("")},_css7:[{width:"100%",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgba(75, 85, 99, var(--tw-bg-opacity))"},borderRadius:"1rem"},(null===t||void 0===t?void 0:t.profile_id)===(null===at||void 0===at?void 0:at.profile_id)?{"--tw-bg-opacity":"1",backgroundColor:"rgba(75, 85, 99, var(--tw-bg-opacity))"}:null],children:Object(f.jsxs)(z,{children:[Object(f.jsx)(A,{src:null===t||void 0===t?void 0:t.photo,alt:"Foto de perfil",_css8:[{width:"40px",height:"40px",borderRadius:"9999px"},0===+(null===t||void 0===t?void 0:t.astoken)?{"--tw-border-opacity":"1",borderColor:"rgba(220, 38, 38, var(--tw-border-opacity))",borderWidth:"4px"}:null]}),null===t||void 0===t?void 0:t.name]})},null===t||void 0===t?void 0:t.profile_id)}))]})]}),Object(f.jsxs)(T,{id:"ChatClient",_css9:[{height:"500px","--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))",display:"flex",width:"100%",borderRadius:"1rem",padding:"0.75rem",flexDirection:"column",flexShrink:"1",overflowX:"hidden"},p.b,Object(b.c)(["&::-webkit-scrollbar-track{border-radius:10px;border:1px solid #4c4c3f;}&::-webkit-scrollbar-thumb{border-radius:10px;background-color:#4c4c3f;}"])],children:["loading"===ct?Object(f.jsx)(m.a,{}):null,Object(f.jsx)(L,{children:Object(f.jsx)(E,{children:50===(null===rt||void 0===rt?void 0:rt.length)?Object(f.jsx)(V,{onClick:function(){tt($+1)},children:"Ver mas Antiguos"}):null})}),(null===rt||void 0===rt?void 0:rt.length)>0?null===rt||void 0===rt?void 0:rt.sort((function(t,e){return t.timestamp>e.timestamp?1:-1})).map((function(t){return(null===at||void 0===at?void 0:at.amolatinaid)===+(null===t||void 0===t?void 0:t.sender)?Object(f.jsx)(k,{justify:"right",data:t}):Object(f.jsx)(k,{justify:"left",data:t})})):null,$>1?Object(f.jsx)(H,{children:Object(f.jsx)(J,{children:50===(null===rt||void 0===rt?void 0:rt.length)?Object(f.jsx)(P,{onClick:function(){tt($-1)},children:"Ver Recientes"}):null})}):null]})]})})}}}]);