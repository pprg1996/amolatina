(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[15],{110:function(e,t,s){"use strict";var a=s(9),i=s(99),n=s(0),r=s(1),o=Object(n.lazy)((function(){return Promise.all([s.e(0),s.e(8)]).then(s.bind(null,161))}));t.a=function(e){var t=e.id,s=e.nombre,d=e.foto,u=e.puntos1,l=e.puntos2,c=e.summary1,p=e.summary2,m=e.supervisorId,b=e.usarMultasOAvisos,j=e.noModal,f=e.tipoEntidad,O=e.amolatinaId,v=e.metaDia,g=e.metaMes,h=e.latestFeedTimestamp,x=e.fineCount,y=e.fineAlertCount,M=e.online,S=e.mingle,C=e.introductory,D=e.operador,I=e.operadorDePausa,k=e.operadoresAsignadosIds,w=e.missingMingleTimestamp,T=e.offlineTimestamp,A=e.unrepliedLettersTimestamps,F=e.token,P=e.perfiles,L=e.perfilesPausados,_=e.pausado,E=Object(n.useState)(!1),z=Object(a.a)(E,2),q=z[0],J=z[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return J(!0)},children:Object(r.jsx)(i.a,{id:t,nombre:s,foto:d,puntos1:u,puntos2:l,summary1:c,summary2:p,tipoEntidad:f,meta1:v,meta2:g,latestFeedTimestamp:h,usarMultasOAvisos:b,fineCount1:null===x||void 0===x?void 0:x.dia,fineAlertCount1:null===y||void 0===y?void 0:y.dia,fineCount2:null===x||void 0===x?void 0:x.mes,fineAlertCount2:null===y||void 0===y?void 0:y.mes,online:M,mingle:S,introductory:C,operador:D,operadorDePausa:I,operadoresAsignadosIds:k,missingMingleTimestamp:w,offlineTimestamp:T,unrepliedLettersTimestamps:A,token:F,perfiles:P,perfilesPausados:L,pausado:_})}),q&&!j?Object(r.jsx)(n.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(o,{id:t,nombre:s,foto:d,setShowModal:J,supervisorId:m,tipoEntidad:f,amolatinaId:O})}):null]})}},411:function(e,t,s){"use strict";s.r(t);var a=s(4),i=s(9),n=s(2),r=s.n(n),o=s(8),d=s(78),u=s(6),l=s(10),c=s(110),p=s(0),m=s(104),b=s(160),j=s(5),f=s(41),O=s(1),v=Object(p.lazy)((function(){return s.e(19).then(s.bind(null,386))})),g=Object(p.lazy)((function(){return s.e(18).then(s.bind(null,387))})),h=j.d.div.withConfig({displayName:"Operadores__OperadoresDiv",componentId:"sc-1pye1q6-0"})(["align-items:start;grid-template-columns:repeat(4,minmax(0,1fr));",""],d.b),x=Object(j.d)(h).withConfig({displayName:"Operadores___StyledOperadoresDiv",componentId:"sc-1pye1q6-1"})({marginTop:"12px",padding:"20px 48px 20px 16px",display:"grid",gap:"32px",overflowX:"hidden"}),y=function(){var e=Object(o.a)(r.a.mark((function e(t,s){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(u.customFetch)("/feeds/all-operators-summary?tiempo=dia"),Object(u.customFetch)("/feeds/all-operators-summary?tiempo=mes")]);case 2:return a=e.sent,e.abrupt("return",Object(u.renombrarPropiedadesAnidadas)({summaryDia:a[0],summaryMes:a[1]}));case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();t.default=function(e){var t=e.entidadSeleccionadaFeed,s=e.orden,n=e.multasOAvisos,r=Object(l.d)("operadores",u.fetchOperadores),o=r.data,d=r.status,j=Object(l.d)(["feedsSummary"],y),h=j.data,M=j.status,S=Object(p.useContext)(m.b),C=Object(p.useState)(!1),D=Object(i.a)(C,2),I=D[0],k=D[1],w=Object(p.useState)(!1),T=Object(i.a)(w,2),A=T[0],F=T[1],P=Object(p.useState)(0),L=Object(i.a)(P,2),_=L[0],E=L[1],z=Object(l.d)(["supervisores"],u.fetchSupervisores).data;return"loading"===d||"loading"===M?Object(O.jsx)(f.a,{}):Object(O.jsxs)(x,{children:[null===o||void 0===o?void 0:o.sort((function(e,t){return"dia"===s?t.progresoDia-e.progresoDia:t.progresoMes-e.progresoMes})).map((function(e){if("supervisor"===t.entity){var s=t.ids;if(!s.includes(e.supervisorId)&&!s.includes(e.id)&&!(null!==z&&void 0!==z?z:[]).filter((function(e){return s.includes(e.id)})).map((function(e){return e.substitute})).includes(+e.id))return null}for(var i=0,r=0;r<((null===S||void 0===S?void 0:S.length)||-1);r++){var o;if(e.id===+(null!==(o=S[r].extraUserId)&&void 0!==o?o:S[r].userId)&&"feeds"===S[r].tablename){var d=new Date(S[r].timestamp);i=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds());break}}return Object(O.jsxs)(p.Fragment,{children:[Object(O.jsx)(b.b,{id:""+e.id,children:Object(O.jsx)(c.a,Object(a.a)(Object(a.a)({},Object(a.a)(Object(a.a)({},e),{},{summary1:null===h||void 0===h?void 0:h.summaryDia[e.id],summary2:null===h||void 0===h?void 0:h.summaryMes[e.id],puntos1:e.progresoDia,puntos2:e.progresoMes,latestFeedTimestamp:i,usarMultasOAvisos:n})),{},{tipoEntidad:"operador"}))}),Object(O.jsxs)(b.a,{id:""+e.id,children:[Object(O.jsx)(b.c,{onClick:function(){k(!0),E(e.id)},children:"Ver multas"}),Object(O.jsx)(b.c,{onClick:function(){F(!0),E(e.id)},children:"Ver progreso de metas"})]})]},e.id)})),I?Object(O.jsx)(p.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading..."}),children:Object(O.jsx)(v,{operadorId:_,setShowMultasModal:k})}):null,A?Object(O.jsx)(p.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading..."}),children:Object(O.jsx)(g,{operadorId:_,setShowMetasOperadorModal:F})}):null]})}}}]);