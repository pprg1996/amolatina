(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[16],{110:function(e,t,i){"use strict";var n=i(9),a=i(99),r=i(0),o=i(1),s=Object(r.lazy)((function(){return Promise.all([i.e(0),i.e(8)]).then(i.bind(null,161))}));t.a=function(e){var t=e.id,i=e.nombre,d=e.foto,l=e.puntos1,c=e.puntos2,u=e.summary1,p=e.summary2,b=e.supervisorId,j=e.usarMultasOAvisos,m=e.noModal,f=e.tipoEntidad,O=e.amolatinaId,v=e.metaDia,g=e.metaMes,h=e.latestFeedTimestamp,x=e.fineCount,y=e.fineAlertCount,C=e.online,T=e.mingle,S=e.introductory,k=e.operador,w=e.operadorDePausa,M=e.operadoresAsignadosIds,P=e.missingMingleTimestamp,I=e.offlineTimestamp,D=e.unrepliedLettersTimestamps,A=e.token,F=e.perfiles,L=e.perfilesPausados,_=e.pausado,E=Object(r.useState)(!1),J=Object(n.a)(E,2),N=J[0],z=J[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){return z(!0)},children:Object(o.jsx)(a.a,{id:t,nombre:i,foto:d,puntos1:l,puntos2:c,summary1:u,summary2:p,tipoEntidad:f,meta1:v,meta2:g,latestFeedTimestamp:h,usarMultasOAvisos:j,fineCount1:null===x||void 0===x?void 0:x.dia,fineAlertCount1:null===y||void 0===y?void 0:y.dia,fineCount2:null===x||void 0===x?void 0:x.mes,fineAlertCount2:null===y||void 0===y?void 0:y.mes,online:C,mingle:T,introductory:S,operador:k,operadorDePausa:w,operadoresAsignadosIds:M,missingMingleTimestamp:P,offlineTimestamp:I,unrepliedLettersTimestamps:D,token:A,perfiles:F,perfilesPausados:L,pausado:_})}),N&&!m?Object(o.jsx)(r.Suspense,{fallback:Object(o.jsx)("div",{children:"Loading..."}),children:Object(o.jsx)(s,{id:t,nombre:i,foto:d,setShowModal:z,supervisorId:b,tipoEntidad:f,amolatinaId:O})}):null]})}},412:function(e,t,i){"use strict";i.r(t);var n=i(4),a=i(2),r=i.n(a),o=i(8),s=i(9),d=i(78),l=i(6),c=i(10),u=i(110),p=i(0),b=i(104),j=i(160),m=i(12),f=i.n(m),O=i(41),v=i(5),g=i(1),h=Object(p.lazy)((function(){return i.e(21).then(i.bind(null,388))})),x=Object(p.lazy)((function(){return Promise.all([i.e(2),i.e(10)]).then(i.bind(null,399))})),y=Object(p.lazy)((function(){return Promise.all([i.e(2),i.e(7),i.e(11)]).then(i.bind(null,396))})),C=v.d.div.withConfig({displayName:"Perfiles__PerfilesDiv",componentId:"m36yex-0"})(["grid-template-columns:repeat(4,minmax(0,1fr));align-items:start;",""],d.b),T=Object(v.d)(C).withConfig({displayName:"Perfiles___StyledPerfilesDiv",componentId:"m36yex-1"})({marginTop:"12px",padding:"20px 48px 20px 16px",display:"grid",gap:"32px",overflowX:"hidden"});t.default=function(e){var t,i=e.orden,a=e.multasOAvisos,d=Object(c.d)(["perfiles"],l.fetchPerfiles),m=d.data,v=d.status,C=Object(c.d)(["operadores"],l.fetchOperadores).data,S=null===C||void 0===C||null===(t=C.find((function(e){return e.id===+f.a.get("id")})))||void 0===t?void 0:t.pausado,k=Object(p.useContext)(b.b),w=Object(p.useState)(!1),M=Object(s.a)(w,2),P=M[0],I=M[1],D=Object(p.useState)(!1),A=Object(s.a)(D,2),F=A[0],L=A[1],_=Object(p.useState)(!1),E=Object(s.a)(_,2),J=E[0],N=E[1],z=Object(p.useState)(0),B=Object(s.a)(z,2),G=B[0],Q=B[1],H=f.a.get("role"),U=+f.a.get("id"),X=Object(p.useState)(!1),Y=Object(s.a)(X,2),q=Y[0],K=Y[1],R=function(){var e=Object(o.a)(r.a.mark((function e(t,i){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(l.customFetch)("/profiles/select",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:a=e.sent,Object(l.errorPerfilesToast)(a,"toma"),setTimeout((function(){c.b.invalidateQueries("perfiles"),K(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(r.a.mark((function e(t,i){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(l.customFetch)("/profiles/release",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:a=e.sent,Object(l.errorPerfilesToast)(a,"liberacion"),setTimeout((function(){c.b.invalidateQueries("perfiles"),K(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return"loading"===v?Object(g.jsx)(O.a,{}):Object(g.jsxs)(T,{children:[null===m||void 0===m?void 0:m.filter((function(e){return e.activo})).sort((function(e,t){var n=function(e){var t;return(null===(t=e.operador)||void 0===t?void 0:t.id)===U?2e6:0},a=function(e){return e.libre?1e6:0};return"dia"===i?t.progresoDia+n(t)+a(t)-(e.progresoDia+n(e)+a(e)):t.progresoMes+n(t)+a(t)-(e.progresoMes+n(e)+a(e))})).map((function(e){for(var t,i,s=0,d=0;d<((null===k||void 0===k?void 0:k.length)||-1);d++)if(e.id===+k[d].perfilId&&"feeds"===k[d].tablename){var b=new Date(k[d].timestamp);s=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds());break}return Object(g.jsxs)(p.Fragment,{children:[Object(g.jsx)(j.b,{id:""+e.id,children:q?Object(g.jsx)(O.a,{}):Object(g.jsx)(u.a,Object(n.a)(Object(n.a)({},Object(n.a)(Object(n.a)({},e),{},{summary1:e.diaSummary,summary2:e.mesSummary,puntos1:e.progresoDia,puntos2:e.progresoMes,latestFeedTimestamp:s,usarMultasOAvisos:a})),{},{tipoEntidad:"perfil"}),e.id)}),+f.a.get("id")!==l.ghostAdminId?Object(g.jsxs)(j.a,{id:""+e.id,children:["admin"!==H&&e.libre&&!S?Object(g.jsx)(j.c,{onClick:function(t){return R(t,e.id)},children:"Tomar"}):null,"admin"===H||(null===(t=e.operador)||void 0===t?void 0:t.id)!==U||S?null:Object(g.jsx)(j.c,{onClick:function(t){return V(t,e.id)},children:"Liberar"}),Object(g.jsx)(j.c,{onClick:function(){N(!0),Q(e.id)},children:"Configurar Token"}),"admin"===H||"supervisor"===H||(null===(i=e.operador)||void 0===i?void 0:i.id)===U?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.c,{onClick:function(){I(!0),Q(e.id)},children:"Configurar Bot 24"}),Object(g.jsx)(j.c,{onClick:function(){L(!0),Q(e.id)},children:"Configurar Super Bot"}),Object(g.jsx)(j.c,{onClick:function(){return navigator.clipboard.writeText(e.amolatinaId)},children:"Copiar ID"}),Object(g.jsx)(j.c,{onClick:Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.customFetch)("/goals/set-auto-goal",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({profileId:e.id,autoGoal:!e.autoGoal})});case 2:c.b.invalidateQueries(["perfiles"]);case 3:case"end":return t.stop()}}),t)}))),children:e.autoGoal?"Apagar meta automatica":"Encender meta automatica"})]}):null]}):null]},e.id)})),J?Object(g.jsx)(p.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(h,{perfilId:G,setShowTokenModal:N})}):null,P?Object(g.jsx)(p.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(x,{perfilId:G,setShowCartas24BotModal:I})}):null,F?Object(g.jsx)(p.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(y,{perfilId:G,setShowSuperCartasBotModal:L})}):null]})}}}]);