(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[31],{444:function(e,t,i){"use strict";i.r(t);var r=i(1),n=i.n(r),o=i(6),a=i(9),d=i(5),s=i(0),c=i(89),l=i(42),u=i(10),p=i(41),v=i(7),b=i(13),g=i.n(b),j=i(83),m=i(2),f=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv",componentId:"q0gn5f-0"})({padding:"1rem","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",display:"flex",flexDirection:"column",gap:"1rem",width:"80vw",height:"80vh",alignItems:"center",position:"relative"}),h=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv2",componentId:"q0gn5f-1"})({display:"flex",flexDirection:"column",overflowX:"hidden",height:"100%",width:"100%",padding:"0.5rem",gap:"0.5rem"}),O=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv3",componentId:"q0gn5f-2"})({width:"100%",display:"flex",justifyContent:"space-between",gap:"0.5rem"}),x=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv4",componentId:"q0gn5f-3"})({display:"flex",gap:"1rem"}),y=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect",componentId:"q0gn5f-4"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"1rem"}),w=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect2",componentId:"q0gn5f-5"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"1rem"}),S=Object(d.d)("input").withConfig({displayName:"SupervisoresModal___StyledInput",componentId:"q0gn5f-6"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"1rem"}),_=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv5",componentId:"q0gn5f-7"})(["",""],(function(e){return e._css})),I=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv6",componentId:"q0gn5f-8"})({display:"flex",justifyContent:"space-between",gap:"0.5rem",padding:"0.5rem",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(107, 114, 128, var(--tw-border-opacity))",borderRadius:"20px",alignItems:"center"}),C=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv7",componentId:"q0gn5f-9"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",width:"10em"}),N=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv8",componentId:"q0gn5f-10"})({position:"relative",display:"flex"}),M=Object(d.d)("img").withConfig({displayName:"SupervisoresModal___StyledImg",componentId:"q0gn5f-11"})({width:"5em",height:"5em",borderRadius:"9999px",objectFit:"cover"}),D=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv9",componentId:"q0gn5f-12"})({display:"flex",gap:"1rem",alignItems:"center"}),q=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv10",componentId:"q0gn5f-13"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"}),T=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv11",componentId:"q0gn5f-14"})({display:"flex",alignItems:"center"}),k=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect3",componentId:"q0gn5f-15"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.375rem",width:"100%",borderRadius:"1rem"}),R=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv12",componentId:"q0gn5f-16"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"}),Q=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv13",componentId:"q0gn5f-17"})({display:"flex",alignItems:"center"}),L=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect4",componentId:"q0gn5f-18"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.375rem",width:"100%",borderRadius:"1rem"}),B=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv14",componentId:"q0gn5f-19"})({display:"flex",gap:"1rem",alignItems:"center"}),F=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv15",componentId:"q0gn5f-20"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"}),J=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv16",componentId:"q0gn5f-21"})({display:"flex",alignItems:"center"}),P=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect5",componentId:"q0gn5f-22"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.375rem",width:"100%",borderRadius:"1rem 0 0 1rem"}),A=Object(d.d)("button").withConfig({displayName:"SupervisoresModal___StyledButton",componentId:"q0gn5f-23"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgba(56, 56, 69, var(--tw-bg-opacity))"},fontWeight:"700",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",borderRadius:"0 1rem 1rem 0"}),H=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv17",componentId:"q0gn5f-24"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"}),W=Object(d.d)("div").withConfig({displayName:"SupervisoresModal___StyledDiv18",componentId:"q0gn5f-25"})({display:"flex",alignItems:"center"}),z=Object(d.d)("select").withConfig({displayName:"SupervisoresModal___StyledSelect6",componentId:"q0gn5f-26"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.375rem",width:"100%",borderRadius:"1rem 0 0 1rem"}),V=Object(d.d)("button").withConfig({displayName:"SupervisoresModal___StyledButton2",componentId:"q0gn5f-27"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgba(56, 56, 69, var(--tw-bg-opacity))"},fontWeight:"700",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",borderRadius:"0 1rem 1rem 0"}),X=Object(d.d)(l.a).withConfig({displayName:"SupervisoresModal___StyledButton3",componentId:"q0gn5f-28"})({width:"auto",marginRight:"0px","@media (min-width: 768px)":{paddingTop:"0.25rem",paddingBottom:"0.25rem",paddingLeft:"0.25rem",paddingRight:"0.25rem"},"@media (min-width: 1024px)":{paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),E=function(e){var t,i,r,d,c=e.supervisor,l=e.cambiarTurnoDeSupervisor,b=e.cambiarTipoDeSupervisor,j=e.supervisores,f=e.operadores,h=e.setIsLoading,O=e.manipulandoSupervisor,x=e.removerSupervisor,y=Object(s.useState)("-1"),w=Object(a.a)(y,2),S=w[0],_=w[1],E=Object(s.useState)("-1"),G=Object(a.a)(E,2),K=G[0],U=G[1],Y=g.a.get("role");return Object(m.jsxs)(I,{children:[Object(m.jsxs)(C,{children:[Object(m.jsx)(N,{children:Object(m.jsx)(M,{src:c.foto,alt:"..."})}),Object(m.jsx)("span",{children:c.nombre})]}),"admin"===Y?Object(m.jsxs)(D,{children:[Object(m.jsxs)(q,{children:[Object(m.jsx)("div",{children:"Turnos"}),Object(m.jsx)(T,{children:Object(m.jsxs)(k,{defaultValue:c.shift,onChange:function(e){return l(c.id,+e.target.value)},children:[Object(m.jsx)("option",{value:0,children:"Dia"}),Object(m.jsx)("option",{value:2,children:"Tarde"}),Object(m.jsx)("option",{value:1,children:"Noche"})]})})]}),Object(m.jsx)(R,{children:(null===j||void 0===j?void 0:j.every((function(e){return e.substitute!==c.id})))?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"Suplentes"}),Object(m.jsx)(Q,{children:Object(m.jsxs)(L,{defaultValue:c.substitute,onChange:function(e){return b(c.id,+e.target.value)},children:[Object(m.jsx)("option",{value:0,children:"Sin suplente"}),null===j||void 0===j?void 0:j.map((function(e){return c.id===e.id||e.substitute||c.substitute!==e.id&&!(null===j||void 0===j?void 0:j.every((function(t){return t.substitute!==e.id})))?null:Object(m.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]})})]}):Object(m.jsxs)("span",{children:["Suplente de ",null===j||void 0===j?void 0:j.find((function(e){return e.substitute===c.id})).nombre]})})]}):null,(null===j||void 0===j?void 0:j.every((function(e){return e.substitute!==c.id})))?Object(m.jsxs)(B,{children:[Object(m.jsxs)(F,{children:[Object(m.jsx)("div",{children:"Operadores"}),Object(m.jsxs)(J,{children:[Object(m.jsxs)(P,{value:S,onChange:function(e){return _(e.target.value)},children:[Object(m.jsx)("option",{value:-1,children:"Seleccionar"}),null===f||void 0===f||null===(t=f.filter((function(e){return!1===e.hidden})))||void 0===t||null===(i=t.filter((function(e){return"operator"===e.role&&null===e.supervisorId})))||void 0===i?void 0:i.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.nombre})}))]}),Object(m.jsx)(A,{onClick:Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("-1"!==S){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,Object(v.customFetch)("/supervisors/assign-operator",{method:"POST",body:JSON.stringify({supervisorId:c.id,operatorId:+S}),headers:{"content-type":"application/json"}});case 5:u.b.invalidateQueries(["operadores"]),u.b.invalidateQueries(["supervisores"]),h(!1);case 8:case"end":return e.stop()}}),e)}))),children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-right",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})})]})]}),Object(m.jsxs)(H,{children:[Object(m.jsx)("div",{children:"Asignados"}),Object(m.jsxs)(W,{children:[Object(m.jsxs)(z,{value:K,onChange:function(e){return U(e.target.value)},children:[Object(m.jsx)("option",{value:-1,children:"Seleccionar"}),null===f||void 0===f||null===(r=f.filter((function(e){return!1===e.hidden})))||void 0===r||null===(d=r.filter((function(e){return e.supervisorId===c.id&&"operator"===e.role})))||void 0===d?void 0:d.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.nombre})}))]}),Object(m.jsx)(V,{onClick:Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("-1"!==K){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,Object(v.customFetch)("/supervisors/assign-operator",{method:"POST",body:JSON.stringify({supervisorId:null,operatorId:+K}),headers:{"content-type":"application/json"}});case 5:u.b.invalidateQueries(["operadores"]),u.b.invalidateQueries(["supervisores"]),h(!1);case 8:case"end":return e.stop()}}),e)}))),children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})})]})]})]}):null,O?Object(m.jsx)(p.a,{}):Object(m.jsx)(m.Fragment,{children:"admin"===Y?Object(m.jsx)(X,{cancel:!0,onClick:function(){window.confirm("\xbfEst\xe1s seguro de querer remover a este supervisor?")&&x(c.id)},children:"Quitar supervisor"}):null})]},c.id)};t.default=function(e){var t,i=e.setShowSupervisoresModal,r=e.supervisores,d=Object(s.useState)(!1),l=Object(a.a)(d,2),b=l[0],I=l[1],C=function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,Object(v.customFetch)("/supervisors/remove-supervisor",{method:"POST",body:JSON.stringify({id:t}),headers:{"content-type":"application/json"}});case 3:u.b.invalidateQueries(["operadores"]),u.b.invalidateQueries(["supervisores"]),I(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(n.a.mark((function e(t,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,Object(v.customFetch)("/supervisors/change-shift",{method:"POST",body:JSON.stringify({id:t,shift:i}),headers:{"content-type":"application/json"}});case 3:u.b.invalidateQueries(["operadores"]),u.b.invalidateQueries(["supervisores"]),setTimeout((function(){I(!1)}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(n.a.mark((function e(t,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,Object(v.customFetch)("/supervisors/change-substitute",{method:"POST",body:JSON.stringify({id:t,substitute:i}),headers:{"content-type":"application/json"}});case 3:u.b.invalidateQueries(["operadores"]),u.b.invalidateQueries(["supervisores"]),setTimeout((function(){I(!1)}),3e3);case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),D=Object(s.useState)("-1"),q=Object(a.a)(D,2),T=q[0],k=q[1],R=Object(s.useState)("-1"),Q=Object(a.a)(R,2),L=Q[0],B=Q[1],F=Object(s.useState)(""),J=Object(a.a)(F,2),P=J[0],A=J[1],H=Object(s.useState)(!1),W=Object(a.a)(H,2),z=W[0],V=W[1],X=g.a.get("role"),G=+g.a.get("id"),K=Object(u.d)(["operadores"],v.fetchOperadores),U=K.data,Y=K.status;return Object(m.jsx)(c.a,{setShowModal:i,children:Object(m.jsx)(f,{children:!0===z||"loading"===Y?Object(m.jsx)(p.a,{}):Object(m.jsxs)(h,{children:["admin"===X?Object(m.jsxs)(O,{children:[Object(m.jsxs)(x,{children:[Object(m.jsxs)("label",{children:["Turnos:"," ",Object(m.jsxs)(y,{onChange:function(e){return k(e.target.value)},value:T,children:[Object(m.jsx)("option",{value:"-1",children:"Todos"}),Object(m.jsx)("option",{value:"0",children:"Dia"}),Object(m.jsx)("option",{value:"2",children:"Tarde"}),Object(m.jsx)("option",{value:"1",children:"Noche"})]})]}),Object(m.jsxs)("label",{children:["Rol:"," ",Object(m.jsxs)(w,{onChange:function(e){return B(e.target.value)},value:L,children:[Object(m.jsx)("option",{value:"-1",children:"Todos"}),Object(m.jsx)("option",{value:"supervisor",children:"Supervisor"}),Object(m.jsx)("option",{value:"suplente",children:"Suplente"})]})]})]}),Object(m.jsx)("div",{children:Object(m.jsx)(S,{placeholder:"Buscar",value:P,onChange:function(e){return A(e.target.value)}})})]}):null,Object(m.jsx)(_,{_css:[{display:"flex",flexDirection:"column",overflowX:"hidden",height:"100%",width:"100%",padding:"0.5rem",gap:"0.5rem"},j.b],children:null===r||void 0===r||null===(t=r.sort((function(e,t){return e.nombre<t.nombre?-1:1})).filter((function(e){return"supervisor"!==X||G===e.id})).filter((function(e){return-1===+T||e.shift===+T})).filter((function(e){return"-1"===L||("supervisor"===L?!(null===r||void 0===r?void 0:r.find((function(t){return t.substitute===e.id}))):"suplente"===L&&(null===r||void 0===r?void 0:r.find((function(t){return t.substitute===e.id}))))})))||void 0===t?void 0:t.filter((function(e){return e.nombre.toLowerCase().includes(P.toLowerCase())})).map((function(e){return Object(m.jsx)(E,{supervisor:e,cambiarTurnoDeSupervisor:N,cambiarTipoDeSupervisor:M,supervisores:r,operadores:U,setIsLoading:V,manipulandoSupervisor:b,removerSupervisor:C})}))})]})})})}}}]);