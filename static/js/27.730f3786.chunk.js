(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[27],{656:function(e,t,i){"use strict";i.r(t);var n=i(7),a=i(1),o=i.n(a),c=i(8),r=i(5),d=i(90),p=i(0),l=i.n(p),s=i(6),m=i(11),h=i(41),u=i(42),x=i(84),b=(i(50),i(10)),j=i.n(b),g=i(2),f=r.d.span.withConfig({displayName:"ModalReport__Id",componentId:"sc-1p0e5u-0"})(["@media (min-width:2560px){font-size:0.75rem !important;}@media (min-height:1000px) and (min-width:651px) and (max-width:767px){font-size:0.975rem !important;}@media (min-height:1000px) and (min-width:451px) and (max-width:650px){font-size:0.75rem !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){font-size:0.8rem !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){font-size:0.7rem !important;}@media (max-width:400px) and (max-height:999px){font-size:0.4rem !important;}",""],{fontSize:"0.35rem","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",width:"8em",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textAlign:"center","@media (min-width: 1024px)":{fontSize:"0.4rem"},"@media (min-width: 1280px)":{fontSize:"0.5rem"},"@media (min-width: 1536px)":{fontSize:"0.6rem"}}),y=function(){var e=Object(c.a)(o.a.mark((function e(t,i,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.customFetch)("/operators/list-clients-report?operadorId=".concat(i,"&agencyId=").concat(n,"&date=").concat(a,"&type=1"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,i,n,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.customFetch)("/agency/list");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv",componentId:"sc-1p0e5u-1"})({"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",width:"95vw",height:"85vh",padding:"1.25rem"}),v=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv2",componentId:"sc-1p0e5u-2"})({display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",marginBottom:"0.5rem"}),O=Object(r.d)("select").withConfig({displayName:"ModalReport___StyledSelect",componentId:"sc-1p0e5u-3"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"0.25rem"}),I=Object(r.d)("input").withConfig({displayName:"ModalReport___StyledInput",componentId:"sc-1p0e5u-4"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"0.25rem"}),S=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv3",componentId:"sc-1p0e5u-5"})(["",""],(function(e){return e._css})),C=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv4",componentId:"sc-1p0e5u-6"})({display:"flex",justifyContent:"space-between",padding:"0.5rem",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(107, 114, 128, var(--tw-border-opacity))",borderRadius:"20px",alignItems:"center"}),R=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv5",componentId:"sc-1p0e5u-7"})({display:"flex",gap:"0.5rem"}),M=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv6",componentId:"sc-1p0e5u-8"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}}),N=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv7",componentId:"sc-1p0e5u-9"})({position:"relative",display:"flex"}),D=Object(r.d)("img").withConfig({displayName:"ModalReport___StyledImg",componentId:"sc-1p0e5u-10"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),z=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv8",componentId:"sc-1p0e5u-11"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}}),F=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv9",componentId:"sc-1p0e5u-12"})({position:"relative",display:"flex"}),k=Object(r.d)("img").withConfig({displayName:"ModalReport___StyledImg2",componentId:"sc-1p0e5u-13"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),E=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv10",componentId:"sc-1p0e5u-14"})({width:"100%",display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center",marginTop:"0.25rem"}),W=Object(r.d)("textarea").withConfig({displayName:"ModalReport___StyledTextarea",componentId:"sc-1p0e5u-15"})(["",""],(function(e){return e._css2})),T=function(e){var t=e.client,i=e.setIsLoading,a=+j.a.get("id"),o=l.a.useState(""),c=Object(n.a)(o,2),r=c[0],d=c[1];return Object(g.jsxs)(C,{children:[Object(g.jsxs)(R,{children:[Object(g.jsxs)(M,{children:[Object(g.jsx)(N,{children:Object(g.jsx)(D,{src:t.client_photo,alt:"..."})}),Object(g.jsx)(f,{title:t.client_name,children:t.client_name})]}),Object(g.jsxs)(z,{children:[Object(g.jsx)(F,{children:Object(g.jsx)(k,{src:t.profile_photo,alt:"..."})}),Object(g.jsx)(f,{title:t.profile_name,children:t.profile_name})]})]}),Object(g.jsxs)(E,{children:[Object(g.jsx)(W,{placeholder:"Escribe el reporte diario....",value:r,onChange:function(e){return d(e.target.value)},_css2:[{resize:"none",borderRadius:"0.375rem",padding:"0.5rem",width:"100%",flexGrow:"1","--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",fontWeight:"700"},x.b]}),Object(g.jsx)(u.b,{type:"button",onClick:function(e){e.preventDefault(),U({text:r,type:"client",Id:t.client_id,operator:a,profileId:t.profile_id,editExplicitContent:-1,setIsLoading:i})},primario:!0,children:"Enviar"})]})]},"".concat(t.client_id,"-").concat(t.profile_id,"-").concat(t.user_id))},L=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv11",componentId:"sc-1p0e5u-16"})({display:"flex",justifyContent:"space-between",padding:"0.5rem",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(107, 114, 128, var(--tw-border-opacity))",borderRadius:"20px",alignItems:"center",gap:"0.5rem"}),H=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv12",componentId:"sc-1p0e5u-17"})({display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"}),A=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv13",componentId:"sc-1p0e5u-18"})({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}}),J=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv14",componentId:"sc-1p0e5u-19"})({position:"relative",display:"flex"}),B=Object(r.d)("img").withConfig({displayName:"ModalReport___StyledImg3",componentId:"sc-1p0e5u-20"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),G=Object(r.d)("h1").withConfig({displayName:"ModalReport___StyledH",componentId:"sc-1p0e5u-21"})({fontWeight:"700",fontSize:"1rem"}),P=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv15",componentId:"sc-1p0e5u-22"})({"--tw-text-opacity":"1",color:"rgba(59, 130, 246, var(--tw-text-opacity))"}),Q=Object(r.d)("h1").withConfig({displayName:"ModalReport___StyledH2",componentId:"sc-1p0e5u-23"})({fontWeight:"700",fontSize:"1rem"}),X=Object(r.d)("div").withConfig({displayName:"ModalReport___StyledDiv16",componentId:"sc-1p0e5u-24"})({"--tw-text-opacity":"1",color:"rgba(239, 68, 68, var(--tw-text-opacity))"}),q=Object(r.d)("h1").withConfig({displayName:"ModalReport___StyledH3",componentId:"sc-1p0e5u-25"})({fontWeight:"700",fontSize:"1rem"}),K=function(e){var t=e.client,i=0;return t.clients.forEach((function(e){i+=e.explicitcontent})),Object(g.jsxs)(L,{children:[Object(g.jsx)(H,{children:Object(g.jsxs)(A,{children:[Object(g.jsx)(J,{children:Object(g.jsx)(B,{src:"/images/".concat(t.user_photo),alt:"..."})}),Object(g.jsx)(f,{title:t.user_name,children:t.user_name})]})}),Object(g.jsx)("div",{children:Object(g.jsxs)(G,{children:["Clientes: ",t.clients.length]})}),Object(g.jsx)(P,{children:Object(g.jsxs)(Q,{children:["Reportes Realizados: ",i]})}),Object(g.jsx)(X,{children:Object(g.jsxs)(q,{children:["Reportes Faltantes: ",t.clients.length-i]})})]},"".concat(t.user_id))},U=function(){var e=Object(c.a)(o.a.mark((function e(t){var i,n,a,c,r,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.text,n=t.type,a=t.Id,c=t.operator,r=t.profileId,d=t.editExplicitContent,(p=t.setIsLoading)(!0),e.prev=2,e.next=5,Object(s.customFetch)("/operators/save-content-explicit",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"text=".concat(i,"&type=").concat(n,"&Id=").concat(a,"&operator=").concat(c,"&profileId=").concat(r,"&editExplicitContent=").concat(d),method:"POST"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:m.b.invalidateQueries(["reportOp"]),p(!1);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();t.default=function(e){var t=e.setShowReport,i=+j.a.get("id"),a=+j.a.get("agency_id"),o=j.a.get("role"),c=Object(m.d)(["agency"],_),r=c.data,p=c.status,s=l.a.useState(1===a?"2":""+a),u=Object(n.a)(s,2),b=u[0],f=u[1],C=l.a.useState((new Date).toISOString().slice(0,-14)),R=Object(n.a)(C,2),M=R[0],N=R[1],D=l.a.useState(!1),z=Object(n.a)(D,2),F=z[0],k=z[1],E=Object(m.d)(["reportOp","admin"!==o?i:null,b,"admin"===o?M:null],y),W=E.data,L=E.status;return Object(g.jsx)(d.a,{setShowModal:t,children:Object(g.jsx)(w,{children:"loading"===L||"loading"===p||F?Object(g.jsx)(h.a,{}):Object(g.jsxs)(g.Fragment,{children:["admin"===o?Object(g.jsxs)(v,{children:[1===a?Object(g.jsxs)("label",{children:["Agencias:"," ",Object(g.jsx)(O,{value:b,onChange:function(e){f(e.target.value)},children:r.filter((function(e){return!0===e.isSub})).map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.name})}))})]}):null,Object(g.jsxs)("label",{children:["Fecha:"," ",Object(g.jsx)(I,{type:"date",value:M,onChange:function(e){return N(e.target.value)}})]})]}):null,Object(g.jsx)(S,{_css:[{display:"flex",flexDirection:"column",overflowX:"hidden",height:"90%",width:"100%",padding:"0.5rem",gap:"0.5rem"},x.b],children:null===W||void 0===W?void 0:W.filter((function(e){return"admin"===o||0===e.explicitcontent})).map((function(e){return"admin"!==o?Object(g.jsx)(T,{client:e,setIsLoading:k}):"admin"===o?Object(g.jsx)(K,{client:e}):void 0}))})]})})})}}}]);