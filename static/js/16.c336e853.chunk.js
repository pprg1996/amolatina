(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[16],{108:function(e,t,i){"use strict";var n=i(9),r=i(99),a=i(0),s=i(1),o=Object(a.lazy)((function(){return Promise.all([i.e(0),i.e(8)]).then(i.bind(null,160))}));t.a=function(e){var t=e.id,i=e.nombre,d=e.foto,l=e.puntos1,c=e.puntos2,u=e.summary1,p=e.summary2,b=e.supervisorId,j=e.usarMultasOAvisos,f=e.noModal,m=e.tipoEntidad,O=e.amolatinaId,v=e.metaDia,g=e.metaMes,h=e.latestFeedTimestamp,x=e.fineCount,y=e.fineAlertCount,S=e.online,T=e.mingle,C=e.introductory,k=e.operador,M=e.operadorDePausa,P=e.operadoresAsignadosIds,w=e.missingMingleTimestamp,I=e.offlineTimestamp,A=e.unrepliedLettersTimestamps,D=e.token,F=e.perfiles,L=e.perfilesPausados,z=e.pausado,B=Object(a.useState)(!1),E=Object(n.a)(B,2),J=E[0],_=E[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{onClick:function(){return _(!0)},children:Object(s.jsx)(r.a,{id:t,nombre:i,foto:d,puntos1:l,puntos2:c,summary1:u,summary2:p,tipoEntidad:m,meta1:v,meta2:g,latestFeedTimestamp:h,usarMultasOAvisos:j,fineCount1:null===x||void 0===x?void 0:x.dia,fineAlertCount1:null===y||void 0===y?void 0:y.dia,fineCount2:null===x||void 0===x?void 0:x.mes,fineAlertCount2:null===y||void 0===y?void 0:y.mes,online:S,mingle:T,introductory:C,operador:k,operadorDePausa:M,operadoresAsignadosIds:P,missingMingleTimestamp:w,offlineTimestamp:I,unrepliedLettersTimestamps:A,token:D,perfiles:F,perfilesPausados:L,pausado:z})}),J&&!f?Object(s.jsx)(a.Suspense,{fallback:Object(s.jsx)("div",{children:"Loading..."}),children:Object(s.jsx)(o,{id:t,nombre:i,foto:d,setShowModal:_,supervisorId:b,tipoEntidad:m,amolatinaId:O})}):null]})}},408:function(e,t,i){"use strict";i.r(t);var n=i(4),r=i(2),a=i.n(r),s=i(8),o=i(9),d=i(5),l=i(78),c=i(6),u=i(10),p=i(108),b=i(0),j=i(131),f=i(159),m=i(12),O=i.n(m),v=i(40),g=i(1),h=Object(b.lazy)((function(){return i.e(21).then(i.bind(null,383))})),x=Object(b.lazy)((function(){return Promise.all([i.e(2),i.e(10)]).then(i.bind(null,395))})),y=Object(b.lazy)((function(){return Promise.all([i.e(2),i.e(7),i.e(11)]).then(i.bind(null,391))})),S=d.d.div.withConfig({displayName:"Perfiles__PerfilesDiv",componentId:"m36yex-0"})(["margin-top:12px;padding:20px 48px 20px 16px;display:grid;gap:32px;grid-template-columns:repeat(4,minmax(0,1fr));overflow-x:hidden;align-items:start;",""],l.b);t.default=function(e){var t,i=e.orden,r=e.multasOAvisos,d=Object(u.d)(["perfiles"],c.fetchPerfiles).data,l=Object(u.d)(["operadores"],c.fetchOperadores).data,m=null===l||void 0===l||null===(t=l.find((function(e){return e.id===+O.a.get("id")})))||void 0===t?void 0:t.pausado,T=Object(b.useContext)(j.a),C=Object(b.useState)(!1),k=Object(o.a)(C,2),M=k[0],P=k[1],w=Object(b.useState)(!1),I=Object(o.a)(w,2),A=I[0],D=I[1],F=Object(b.useState)(!1),L=Object(o.a)(F,2),z=L[0],B=L[1],E=Object(b.useState)(0),J=Object(o.a)(E,2),_=J[0],N=J[1],Q=O.a.get("role"),H=+O.a.get("id"),U=Object(b.useState)(!1),Y=Object(o.a)(U,2),q=Y[0],G=Y[1],K=function(){var e=Object(s.a)(a.a.mark((function e(t,i){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(c.customFetch)("/profiles/select",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:r=e.sent,Object(c.errorPerfilesToast)(r,"toma"),setTimeout((function(){u.b.invalidateQueries("perfiles"),G(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(a.a.mark((function e(t,i){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(c.customFetch)("/profiles/release",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:r=e.sent,Object(c.errorPerfilesToast)(r,"liberacion"),setTimeout((function(){u.b.invalidateQueries("perfiles"),G(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return Object(g.jsxs)(S,{children:[null===d||void 0===d?void 0:d.filter((function(e){return e.activo})).sort((function(e,t){var n=function(e){var t;return(null===(t=e.operador)||void 0===t?void 0:t.id)===H?2e6:0},r=function(e){return e.libre?1e6:0};return"dia"===i?t.progresoDia+n(t)+r(t)-(e.progresoDia+n(e)+r(e)):t.progresoMes+n(t)+r(t)-(e.progresoMes+n(e)+r(e))})).map((function(e){for(var t,i,a=0,s=0;s<((null===T||void 0===T?void 0:T.length)||-1);s++)if(e.id===+T[s].perfilId&&"feeds"===T[s].tablename){var o=new Date(T[s].timestamp);a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds());break}return Object(g.jsxs)(b.Fragment,{children:[Object(g.jsx)(f.b,{id:""+e.id,children:q?Object(g.jsx)(v.a,{}):Object(g.jsx)(p.a,Object(n.a)(Object(n.a)({},Object(n.a)(Object(n.a)({},e),{},{summary1:e.diaSummary,summary2:e.mesSummary,puntos1:e.progresoDia,puntos2:e.progresoMes,latestFeedTimestamp:a,usarMultasOAvisos:r})),{},{tipoEntidad:"perfil"}),e.id)}),+O.a.get("id")!==c.ghostAdminId?Object(g.jsxs)(f.a,{id:""+e.id,children:["admin"!==Q&&e.libre&&!m?Object(g.jsx)(f.c,{onClick:function(t){return K(t,e.id)},children:"Tomar"}):null,"admin"===Q||(null===(t=e.operador)||void 0===t?void 0:t.id)!==H||m?null:Object(g.jsx)(f.c,{onClick:function(t){return R(t,e.id)},children:"Liberar"}),Object(g.jsx)(f.c,{onClick:function(){B(!0),N(e.id)},children:"Configurar Token"}),"admin"===Q||"supervisor"===Q||(null===(i=e.operador)||void 0===i?void 0:i.id)===H?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.c,{onClick:function(){P(!0),N(e.id)},children:"Configurar Bot 24"}),Object(g.jsx)(f.c,{onClick:function(){D(!0),N(e.id)},children:"Configurar Super Bot"})]}):null]}):null]},e.id)})),z?Object(g.jsx)(b.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(h,{perfilId:_,setShowTokenModal:B})}):null,M?Object(g.jsx)(b.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(x,{perfilId:_,setShowCartas24BotModal:P})}):null,A?Object(g.jsx)(b.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(y,{perfilId:_,setShowSuperCartasBotModal:D})}):null]})}}}]);