(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[27],{656:function(e,t,i){"use strict";i.r(t);var n=i(7),o=i(1),r=i.n(o),a=i(8),c=i(5),d=i(90),l=i(0),s=i.n(l),p=i(6),u=i(11),m=i(41),b=i(42),h=i(84),g=i(10),j=i.n(g),x=i(106),f=i(216),y=i(2),_=c.d.span.withConfig({displayName:"ModalReport__Id",componentId:"sc-1p0e5u-0"})(["@media (min-width:2560px){font-size:0.75rem !important;}@media (min-height:1000px) and (min-width:651px) and (max-width:767px){font-size:0.975rem !important;}@media (min-height:1000px) and (min-width:451px) and (max-width:650px){font-size:0.75rem !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){font-size:0.8rem !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){font-size:0.7rem !important;}@media (max-width:400px) and (max-height:999px){font-size:0.4rem !important;}",""],{fontSize:"0.35rem","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",width:"8em",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textAlign:"center","@media (min-width: 1024px)":{fontSize:"0.4rem"},"@media (min-width: 1280px)":{fontSize:"0.5rem"},"@media (min-width: 1536px)":{fontSize:"0.6rem"}}),w=function(){var e=Object(a.a)(r.a.mark((function e(t,i,n,o,a){var c,d,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=+j.a.get("id"),d=j.a.get("role"),l="supervisor"===d?"&supervisorId=".concat(c):"",3!==a||null!==i){e.next=5;break}return e.abrupt("return",null);case 5:if(2!==a||"operator"!==d&&"support"!==d){e.next=7;break}return e.abrupt("return",null);case 7:if(3!==a||"operator"!==d&&"support"!==d){e.next=9;break}return e.abrupt("return",null);case 9:return 3===a&&(a=1),e.next=12,Object(p.customFetch)("/operators/list-clients-report?operadorId=".concat(i,"&agencyId=").concat(n,"&date=").concat(o,"&type=").concat(a).concat(l));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,i,n,o,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.customFetch)("/agency/list");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv",componentId:"sc-1p0e5u-1"})({"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",width:"95vw",height:"85vh",padding:"1.25rem"}),I=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv2",componentId:"sc-1p0e5u-2"})({display:"flex",justifyContent:"center",marginBottom:"0.5rem"}),C=Object(c.d)(x.a).withConfig({displayName:"ModalReport___StyledToggleGroup",componentId:"sc-1p0e5u-3"})({alignSelf:"center"}),S=Object(c.d)(x.b).withConfig({displayName:"ModalReport___StyledToggleGroupItem",componentId:"sc-1p0e5u-4"})(["",""],(function(e){return e._css})),R=Object(c.d)(x.b).withConfig({displayName:"ModalReport___StyledToggleGroupItem2",componentId:"sc-1p0e5u-5"})(["",""],(function(e){return e._css2})),M=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv3",componentId:"sc-1p0e5u-6"})(["",""],(function(e){return e._css3})),N=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv4",componentId:"sc-1p0e5u-7"})({display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem",marginBottom:"0.5rem"}),D=Object(c.d)("select").withConfig({displayName:"ModalReport___StyledSelect",componentId:"sc-1p0e5u-8"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"0.25rem"}),k=Object(c.d)(f.a).withConfig({displayName:"ModalReport___StyledLeftSvg",componentId:"sc-1p0e5u-9"})({height:"1.5rem",width:"1.5rem"}),F=Object(c.d)("input").withConfig({displayName:"ModalReport___StyledInput",componentId:"sc-1p0e5u-10"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",padding:"0.25rem",borderRadius:"0.25rem"}),z=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv5",componentId:"sc-1p0e5u-11"})(["",""],(function(e){return e._css4})),T=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv6",componentId:"sc-1p0e5u-12"})({display:"flex",justifyContent:"space-between",padding:"0.5rem",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(107, 114, 128, var(--tw-border-opacity))",borderRadius:"20px",alignItems:"center"}),E=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv7",componentId:"sc-1p0e5u-13"})({display:"flex",gap:"0.5rem"}),L=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv8",componentId:"sc-1p0e5u-14"})(["",""],(function(e){return e._css5})),W=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv9",componentId:"sc-1p0e5u-15"})({position:"relative",display:"flex"}),B=Object(c.d)("img").withConfig({displayName:"ModalReport___StyledImg",componentId:"sc-1p0e5u-16"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),G=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv10",componentId:"sc-1p0e5u-17"})(["",""],(function(e){return e._css6})),A=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv11",componentId:"sc-1p0e5u-18"})({position:"relative",display:"flex"}),H=Object(c.d)("img").withConfig({displayName:"ModalReport___StyledImg2",componentId:"sc-1p0e5u-19"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),Q=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv12",componentId:"sc-1p0e5u-20"})({width:"100%",display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center",marginTop:"0.25rem"}),J=Object(c.d)("textarea").withConfig({displayName:"ModalReport___StyledTextarea",componentId:"sc-1p0e5u-21"})(["",""],(function(e){return e._css7})),X=function(e){var t=e.client,i=e.setIsLoading,o=e.disabled,r=e.flush,a=e.setFlush,c=+j.a.get("id"),d=s.a.useRef(),l=s.a.useRef(),u=Object(p.useCopyTextOnClick)(d,t.client_amolatina_id),m=Object(p.useCopyTextOnClick)(l,t.profiles_amolatina_id),g=s.a.useState(null!==t.cvec_id?t.cvec_text:""),x=Object(n.a)(g,2),f=x[0],w=x[1];return Object(y.jsxs)(T,{children:[Object(y.jsxs)(E,{children:[Object(y.jsxs)(L,{ref:d,_css5:[{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}},u],children:[Object(y.jsx)(W,{children:Object(y.jsx)(B,{src:Object(p.imageExists)(t.client_photo),alt:"..."})}),Object(y.jsx)(_,{title:t.client_name,children:t.client_name})]}),Object(y.jsxs)(G,{ref:l,_css6:[{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}},m],children:[Object(y.jsx)(A,{children:Object(y.jsx)(H,{src:Object(p.imageExists)(t.profile_photo),alt:"..."})}),Object(y.jsx)(_,{title:t.profile_name,children:t.profile_name})]})]}),Object(y.jsxs)(Q,{children:[Object(y.jsx)(J,{placeholder:"Escribe el reporte diario....",value:f,onChange:function(e){return w(e.target.value)},disabled:!0===o?"disabled":null,_css7:[{resize:"none",borderRadius:"0.375rem",padding:"0.5rem",width:"100%",flexGrow:"1","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontWeight:"700","--tw-bg-opacity":"1",backgroundColor:"rgba(23, 23, 28, var(--tw-bg-opacity))",borderWidth:"2px",borderColor:"#4c4c3f"},h.b]}),!1===o?Object(y.jsx)(y.Fragment,{children:null===t.cvec_id?Object(y.jsx)(b.b,{type:"button",onClick:function(e){e.preventDefault(),ne({text:f,type:"client",Id:t.client_id,operator:c,profileId:t.profile_id,editExplicitContent:-1,setIsLoading:i,flush:r,setFlush:a})},primario:!0,children:"Enviar"}):Object(y.jsx)(b.b,{type:"button",onClick:function(e){e.preventDefault(),ne({text:f,type:"client",Id:t.client_id,operator:c,profileId:t.profile_id,editExplicitContent:t.cvec_id,setIsLoading:i,flush:r,setFlush:a})},green:!0,children:"Actualizar"})}):null]})]},"".concat(t.client_id,"-").concat(t.profile_id,"-").concat(t.user_id))},Y=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv13",componentId:"sc-1p0e5u-22"})({display:"flex",justifyContent:"space-between",padding:"0.5rem",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(107, 114, 128, var(--tw-border-opacity))",borderRadius:"20px",alignItems:"center",gap:"0.5rem"}),P=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv14",componentId:"sc-1p0e5u-23"})({display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"}),V=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv15",componentId:"sc-1p0e5u-24"})(["",""],(function(e){return e._css8})),q=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv16",componentId:"sc-1p0e5u-25"})({position:"relative",display:"flex"}),K=Object(c.d)("img").withConfig({displayName:"ModalReport___StyledImg3",componentId:"sc-1p0e5u-26"})({width:"4em",height:"4em",borderRadius:"9999px",objectFit:"cover"}),U=Object(c.d)("h1").withConfig({displayName:"ModalReport___StyledH",componentId:"sc-1p0e5u-27"})({fontWeight:"700",fontSize:"1rem"}),Z=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv17",componentId:"sc-1p0e5u-28"})({"--tw-text-opacity":"1",color:"rgba(59, 130, 246, var(--tw-text-opacity))"}),$=Object(c.d)("h1").withConfig({displayName:"ModalReport___StyledH2",componentId:"sc-1p0e5u-29"})({fontWeight:"700",fontSize:"1rem"}),ee=Object(c.d)("div").withConfig({displayName:"ModalReport___StyledDiv18",componentId:"sc-1p0e5u-30"})({"--tw-text-opacity":"1",color:"rgba(239, 68, 68, var(--tw-text-opacity))"}),te=Object(c.d)("h1").withConfig({displayName:"ModalReport___StyledH3",componentId:"sc-1p0e5u-31"})({fontWeight:"700",fontSize:"1rem"}),ie=function(e){var t=e.client,i=e.setSelectId,n=0;return t.clients.forEach((function(e){n+=e.explicitcontent})),Object(y.jsxs)(Y,{children:[Object(y.jsx)(P,{children:Object(y.jsxs)(V,{onClick:function(){return i(t.user_id)},_css8:[{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem","@media (min-width: 1024px)":{gap:"0.75rem"}},"cursor: pointer; transition: transform 0.12s linear; :hover { transform: translateY(-6px); } :active { transform: translateY(3px); }"],children:[Object(y.jsx)(q,{children:Object(y.jsx)(K,{src:Object(p.imageExists)("/images/".concat(t.user_photo)),alt:"..."})}),Object(y.jsx)(_,{title:t.user_name,children:t.user_name})]})}),Object(y.jsx)("div",{children:Object(y.jsxs)(U,{children:["Clientes: ",t.clients.length]})}),Object(y.jsx)(Z,{children:Object(y.jsxs)($,{children:["Reportes Realizados: ",n]})}),Object(y.jsx)(ee,{children:Object(y.jsxs)(te,{children:["Reportes Faltantes: ",t.clients.length-n]})})]},"".concat(t.user_id))},ne=function(){var e=Object(a.a)(r.a.mark((function e(t){var i,n,o,a,c,d,l,s,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.text,n=t.type,o=t.Id,a=t.operator,c=t.profileId,d=t.editExplicitContent,l=t.setIsLoading,s=t.flush,m=t.setFlush,l(!0),e.prev=2,e.next=5,Object(p.customFetch)("/operators/save-content-explicit",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"text=".concat(i,"&type=").concat(n,"&Id=").concat(o,"&operator=").concat(a,"&profileId=").concat(c,"&editExplicitContent=").concat(d),method:"POST"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:l(!1),u.b.invalidateQueries("reportOp"),u.b.invalidateQueries("reportExtra"),u.b.invalidateQueries("reportGeneral"),m(s+1);case 15:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();t.default=function(e){var t=e.setShowReport,i=+j.a.get("id"),o=j.a.get("role"),r=+j.a.get("agency_id"),a=Object(u.d)(["agency"],O),c=a.data,l=a.status,p=s.a.useState(1===r?"2":""+r),b=Object(n.a)(p,2),g=b[0],x=b[1],f=s.a.useState(null),_=Object(n.a)(f,2),T=_[0],E=_[1],L=s.a.useState((new Date).toISOString().slice(0,-14)),W=Object(n.a)(L,2),B=W[0],G=W[1],A=s.a.useState(!1),H=Object(n.a)(A,2),Q=H[0],J=H[1],Y=s.a.useState(0),P=Object(n.a)(Y,2),V=P[0],q=P[1],K=Object(u.d)(["reportOp","admin"!==o?i:null,g,null,1,V],w),U=K.data,Z=K.status,$=Object(u.d)(["reportGeneral",T,g,B,2,V],w),ee=$.data,te=$.status,ne=Object(u.d)(["reportExtra",T,null,B,3,V],w),oe=ne.data,re=ne.status,ae=s.a.useState("admin"===o?"reportes":"diario"),ce=Object(n.a)(ae,2),de=ce[0],le=ce[1];return Object(y.jsx)(d.a,{setShowModal:t,children:Object(y.jsx)(v,{children:"loading"===Z||"loading"===l||"loading"===te||"loading"===re||Q?Object(y.jsx)(m.a,{}):Object(y.jsxs)(y.Fragment,{children:["supervisor"===o?Object(y.jsx)(I,{children:Object(y.jsxs)(C,{type:"single",value:de,onValueChange:function(e){e&&le(e)},children:[Object(y.jsx)(S,{value:"diario",_css:[{paddingRight:"0.75rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontWeight:"700",borderTopLeftRadius:"1rem",borderBottomLeftRadius:"1rem",borderWidth:"1px",borderColor:"#4c4c3f",borderStyle:"solid"},"diario"===de?{"--tw-bg-opacity":"1",backgroundColor:"rgba(76, 76, 63, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(31, 31, 38, var(--tw-bg-opacity))"}],children:"Diarios"}),Object(y.jsx)(R,{value:"reportes",_css2:[{paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.75rem","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontWeight:"700",borderTopRightRadius:"1rem",borderBottomRightRadius:"1rem",borderWidth:"1px",borderColor:"#4c4c3f",borderStyle:"solid"},"reportes"===de?{"--tw-bg-opacity":"1",backgroundColor:"rgba(76, 76, 63, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(31, 31, 38, var(--tw-bg-opacity))"}],children:"Reportes"})]})}):null,"diario"===de?Object(y.jsx)(M,{_css3:[{display:"flex",flexDirection:"column",overflowX:"hidden",height:"90%",width:"100%",padding:"0.5rem",gap:"0.5rem"},h.b],children:U.map((function(e){return Object(y.jsx)(X,{client:e,setIsLoading:J,disabled:!1,flush:V,setFlush:q})}))}):null,"reportes"===de?Object(y.jsxs)(y.Fragment,{children:["admin"===o||"supervisor"===o?Object(y.jsxs)(N,{children:[1===r&&"admin"===o?Object(y.jsxs)("label",{children:["Agencias:"," ",Object(y.jsx)(D,{value:g,onChange:function(e){x(e.target.value)},children:c.filter((function(e){return!0===e.isSub})).map((function(e){return Object(y.jsx)("option",{value:e.id,children:e.name})}))})]}):null,null!==T?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("button",{type:"button",onClick:function(){return E(null)},children:Object(y.jsx)(k,{})})}):null,Object(y.jsxs)("label",{children:["Fecha:"," ",Object(y.jsx)(F,{type:"date",value:B,onChange:function(e){return G(e.target.value)}})]})]}):null,Object(y.jsx)(z,{_css4:[{display:"flex",flexDirection:"column",overflowX:"hidden",height:"90%",width:"100%",padding:"0.5rem",gap:"0.5rem"},h.b],children:null===T?Object(y.jsx)(y.Fragment,{children:null===ee||void 0===ee?void 0:ee.map((function(e){return Object(y.jsx)(ie,{client:e,setSelectId:E})}))}):Object(y.jsx)(y.Fragment,{children:oe.map((function(e){return Object(y.jsx)(X,{client:e,setIsLoading:J,disabled:!0,flush:V,setFlush:q})}))})})]}):null]})})})}}}]);