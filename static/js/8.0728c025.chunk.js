(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[8],{426:function(t,e,a){"use strict";a.r(e);var n=a(17),c=a(2),l=a.n(c),o=a(8),i=a(5),s=a(78),r=a(0),d=a(9),u=a(7),j=a(411),b=a(412),p=a(405),O=a(413),h=a(388),v=a(389),g=a(21),y=a(10),x=a.n(y),f=a(403),m=a(350),w=a(1),S=function(t,e,a,n,c,l,o){var i,s=d.b.getQueryData(["perfiles"]),r=d.b.getQueryData(["tags"]);return"clientes"!==t||"all"===e&&"all"===a?"puntos"===t&&"dateRange"===n?u.b.map((function(t,e,a){var n=t.name,c=t.value,l=a.length;return"todos"===c?null:Object(w.jsx)(f.a,{dataKey:c,stackId:"a",fill:u.e[e],isAnimationActive:!1,children:e===l-1?Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}}):null},n)})):"cartas24"===t?"all"===a?s.map((function(t,e,a){var n=t.id,c=t.nombre,l=a.length;return Object(w.jsx)(f.a,{dataKey:c,stackId:"a",fill:u.e[e%u.e.length],isAnimationActive:!1,children:e===l-1?Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}}):null},n)})):"all"===o?null===l||void 0===l?void 0:l.map((function(t,e,a){var n=t.id,c=t.title,l=a.length;return Object(w.jsx)(f.a,{dataKey:n+" "+c,stackId:"a",fill:u.e[e%u.e.length],isAnimationActive:!1,children:e===l-1?Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}}):null},n)})):null===(i=["all"].concat(Object(g.a)(null!==r&&void 0!==r?r:[])))||void 0===i?void 0:i.map((function(t,e,a){var n=a.length;return Object(w.jsx)(f.a,{dataKey:t,stackId:"a",fill:u.e[e%u.e.length],isAnimationActive:!1,children:e===n-1?Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}}):null},t)})):["clientes"===t&&+x.a.get("id")!==u.w?Object(w.jsx)(f.a,{dataKey:"notContacted",stackId:"a",fill:"#6B39BD",isAnimationActive:!1},1):null,Object(w.jsx)(f.a,{dataKey:"clientes"===t?"contacted":"total",stackId:"a",fill:"#82ca9d",isAnimationActive:!1,children:"clientes"!==t?Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}}):null},2),"clientes"===t?Object(w.jsx)(f.a,{dataKey:"pointed",stackId:"a",fill:"#FAC24B",isAnimationActive:!1,children:Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}})},3):null]:Object(w.jsx)(f.a,{dataKey:"total",stackId:"a",fill:"#6B39BD",isAnimationActive:!1,children:Object(w.jsx)(m.a,{dataKey:"total",position:"top",style:{fill:"white"}})})},_=function(){var t=Object(o.a)(l.a.mark((function t(e,a,n,c,o,i,s,r,d,j,b,p,O,h,v,g,y){var x,f,m,w,S,_,C,I,M,E,A,k,N,K,D;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x="clientes"===a?"clients-stats":"points-stats",f=c?"&country=".concat(c):"",m=i?"&hour=".concat(i):"",w="&minAge=".concat(o?o[0]:b),S="&maxAge=".concat(o?o[1]:p),"&operatorId=".concat(r),_="&profileId=".concat(d),C="&tag=".concat(s),I="all"!==O?"&gender=".concat(O):"",M="all"!==h?"&prefGender=".concat(h):"",E="&fromDate=".concat(v),A="&toDate=".concat(g),k="todos"!==y?"&service=".concat(y):"","cartas24"!==a){t.next=20;break}return N="all"!==r?"&operatorId=".concat(r):"",K="all"!==d?"&profileId=".concat(d):"",D="all"!==j?"&botLetterId=".concat(j):"",t.next=19,Object(u.g)("/bot-letters/delivery-count?".concat(K).concat(N).concat(D));case 19:return t.abrupt("return",t.sent);case 20:return t.next=22,Object(u.g)("/agency/".concat(x,"?group=").concat(n).concat(f).concat(m).concat(w).concat(S).concat(C).concat(_).concat(I).concat(M).concat(E).concat(A).concat(k));case 22:return t.abrupt("return",t.sent);case 23:case"end":return t.stop()}}),t)})));return function(e,a,n,c,l,o,i,s,r,d,u,j,b,p,O,h,v){return t.apply(this,arguments)}}(),C=function(){var t=Object(o.a)(l.a.mark((function t(e,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("all"!==a){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,Object(u.g)("/bot-letters/profile-letters?profileId=".concat(a,"&visible=all"));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),I=Object(i.d)("div").withConfig({displayName:"EstadisticasModal___StyledDiv",componentId:"sc-1s0j11n-0"})({width:"90vw",height:"95vh",overflowX:"auto",display:"flex",flexDirection:"column","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}),M=Object(i.d)("div").withConfig({displayName:"EstadisticasModal___StyledDiv2",componentId:"sc-1s0j11n-1"})({paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",display:"flex",gap:"1rem",alignItems:"center"}),E=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect",componentId:"sc-1s0j11n-2"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),A=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect2",componentId:"sc-1s0j11n-3"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),k=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect3",componentId:"sc-1s0j11n-4"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),N=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect4",componentId:"sc-1s0j11n-5"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),K=Object(i.d)("button").withConfig({displayName:"EstadisticasModal___StyledButton",componentId:"sc-1s0j11n-6"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(220, 38, 38, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem"}),D=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect5",componentId:"sc-1s0j11n-7"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),P=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect6",componentId:"sc-1s0j11n-8"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),T=Object(i.d)("input").withConfig({displayName:"EstadisticasModal___StyledInput",componentId:"sc-1s0j11n-9"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",width:"3rem"}),R=Object(i.d)("input").withConfig({displayName:"EstadisticasModal___StyledInput2",componentId:"sc-1s0j11n-10"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",width:"3rem"}),B=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect7",componentId:"sc-1s0j11n-11"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),H=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect8",componentId:"sc-1s0j11n-12"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),F=Object(i.d)("input").withConfig({displayName:"EstadisticasModal___StyledInput3",componentId:"sc-1s0j11n-13"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",width:"9rem"}),L=Object(i.d)("input").withConfig({displayName:"EstadisticasModal___StyledInput4",componentId:"sc-1s0j11n-14"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))",width:"9rem"}),G=Object(i.d)("select").withConfig({displayName:"EstadisticasModal___StyledSelect9",componentId:"sc-1s0j11n-15"})({"--tw-text-opacity":"1",color:"rgba(0, 0, 0, var(--tw-text-opacity))"}),J=Object(i.d)("div").withConfig({displayName:"EstadisticasModal___StyledDiv3",componentId:"sc-1s0j11n-16"})({flexGrow:"1"});e.default=function(t){var e,a=t.setShowEstadisticasModal,c=t.initEstadistica,l=t.initPerfilId,o=t.initPerfilCarta24Id,i=Object(r.useState)(null!==c&&void 0!==c?c:"puntos"),g=Object(n.a)(i,2),y=g[0],f=g[1],m=Object(r.useState)("dateRange"),Q=Object(n.a)(m,2),z=Q[0],X=Q[1],q=Object(r.useState)(),U=Object(n.a)(q,2),V=U[0],W=U[1],Y=Object(r.useState)(),Z=Object(n.a)(Y,2),$=Z[0],tt=Z[1],et=Object(r.useState)(),at=Object(n.a)(et,2),nt=at[0],ct=at[1],lt=Object(r.useState)("all"),ot=Object(n.a)(lt,2),it=ot[0],st=ot[1],rt=Object(r.useState)("all"),dt=Object(n.a)(rt,2),ut=dt[0],jt=(dt[1],Object(r.useState)(null!==l&&void 0!==l?l:"all")),bt=Object(n.a)(jt,2),pt=bt[0],Ot=bt[1],ht=Object(r.useState)(null!==o&&void 0!==o?o:"all"),vt=Object(n.a)(ht,2),gt=vt[0],yt=vt[1],xt=Object(r.useState)(18),ft=Object(n.a)(xt,2),mt=ft[0],wt=ft[1],St=Object(r.useState)(80),_t=Object(n.a)(St,2),Ct=_t[0],It=_t[1],Mt=Object(r.useState)("all"),Et=Object(n.a)(Mt,2),At=Et[0],kt=Et[1],Nt=Object(r.useState)("all"),Kt=Object(n.a)(Nt,2),Dt=Kt[0],Pt=Kt[1],Tt=Object(r.useState)((new Date).toISOString().substring(0,7)+"-01"),Rt=Object(n.a)(Tt,2),Bt=Rt[0],Ht=Rt[1],Ft=Object(r.useState)((new Date).toISOString().substring(0,10)),Lt=Object(n.a)(Ft,2),Gt=Lt[0],Jt=Lt[1],Qt=Object(r.useState)("todos"),zt=Object(n.a)(Qt,2),Xt=zt[0],qt=zt[1],Ut=Object(r.useState)(!0),Vt=Object(n.a)(Ut,2),Wt=Vt[0],Yt=Vt[1],Zt=Object(d.d)(["tags"],u.u,{staleTime:1/0}).data,$t=Object(d.d)(["estadisticas",y,z,V,$,nt,it,ut,pt,gt,mt,Ct,At,Dt,Bt,Gt,Xt],_,{refetchInterval:!1,staleTime:1/0,refetchOnMount:"always"}).data,te=Object(d.d)(["perfiles"],u.r,{refetchInterval:!1}).data,ee=Object(d.d)(["cartas-bot-all",pt],C,{refetchInterval:!1}).data;return Object(w.jsx)(s.a,{setShowModal:a,children:Object(w.jsxs)(I,{children:[Object(w.jsxs)(M,{children:[Object(w.jsx)("button",{onClick:function(){return Yt((function(t){return!t}))},children:Wt?"< >":"> <"}),Object(w.jsxs)("label",{children:["Contabilizar:"," ",Object(w.jsxs)(E,{value:y,onChange:function(t){f(t.target.value),X("country"),W(),tt(),ct()},children:[Object(w.jsx)("option",{value:"clientes",children:"Clientes"}),Object(w.jsx)("option",{value:"puntos",children:"Puntos"}),Object(w.jsx)("option",{value:"cartas24",children:"Cartas 24"})]})]}),V?Object(w.jsxs)("span",{children:["Pais: ",V]}):null,$?Object(w.jsxs)("span",{children:["Edad: ",$[0],"-",$[1]]}):null,void 0!==nt?Object(w.jsxs)("span",{children:["Hora: ",0===nt?"12 AM":nt<12?"".concat(nt," AM"):12===nt?"12 PM":"".concat(nt-12," PM")]}):null,"cartas24"===y?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("label",{children:["Perfil:",Object(w.jsxs)(A,{value:pt,onChange:function(t){yt("all"),Ot(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todos"}),null===te||void 0===te?void 0:te.map((function(t){return Object(w.jsx)("option",{value:t.id,children:t.nombre},t.id)}))]})]}),"all"!==pt?Object(w.jsxs)("label",{children:["Carta:",Object(w.jsxs)(k,{value:gt,onChange:function(t){return yt(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todas"}),null===ee||void 0===ee?void 0:ee.map((function(t){return Object(w.jsxs)("option",{value:t.id,children:[t.id," ",t.title]},t.id)}))]})]}):null]}):Object(w.jsxs)("label",{children:["Agrupar por:"," ",Object(w.jsxs)(N,{value:z,onChange:function(t){return X(t.target.value)},children:[V?null:Object(w.jsx)("option",{value:"country",children:"Paises"}),$?null:Object(w.jsx)("option",{value:"age",children:"Edades"}),"puntos"!==y||nt?null:Object(w.jsx)("option",{value:"hours",children:"Horas"}),"puntos"!==y||nt||V||$?null:Object(w.jsx)("option",{value:"dateRange",children:"Rango de fechas"})]})]}),V||$||void 0!==nt?Object(w.jsx)(K,{onClick:function(){W(),tt(),ct()},children:"Limpiar"}):null,"clientes"===y&&"country"===z?Object(w.jsxs)(w.Fragment,{children:[+x.a.get("id")!==u.w?Object(w.jsxs)("label",{children:["Tag:",Object(w.jsxs)(D,{value:it,onChange:function(t){return st(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todos"}),null===Zt||void 0===Zt?void 0:Zt.map((function(t){return Object(w.jsx)("option",{value:t,children:t},t)}))]})]}):null,Object(w.jsxs)("label",{children:["Perfil:",Object(w.jsxs)(P,{value:pt,onChange:function(t){return Ot(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todos"}),null===te||void 0===te?void 0:te.map((function(t){return Object(w.jsx)("option",{value:t.id,children:t.nombre},t.id)}))]})]}),Object(w.jsxs)("label",{children:["Edad minima:",Object(w.jsx)(T,{type:"number",value:mt,onChange:function(t){return wt(t.target.value)}})]}),Object(w.jsxs)("label",{children:["Edad maxima:",Object(w.jsx)(R,{type:"number",value:Ct,onChange:function(t){return It(t.target.value)}})]}),Object(w.jsxs)("label",{children:["Sexo:",Object(w.jsxs)(B,{value:At,onChange:function(t){return kt(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todos"}),Object(w.jsx)("option",{value:"fem",children:"Mujer"}),Object(w.jsx)("option",{value:"mal",children:"Hombre"})]})]}),Object(w.jsxs)("label",{children:["En busca de:",Object(w.jsxs)(H,{value:Dt,onChange:function(t){return Pt(t.target.value)},children:[Object(w.jsx)("option",{value:"all",children:"Todos"}),Object(w.jsx)("option",{value:"mal",children:"Hombre"}),Object(w.jsx)("option",{value:"fem",children:"Mujer"})]})]})]}):null,"puntos"===y&&"dateRange"===z?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("label",{children:["Desde:",Object(w.jsx)(F,{type:"date",value:Bt,onChange:function(t){return Ht(t.target.value)}})]}),Object(w.jsxs)("label",{children:["Hasta:",Object(w.jsx)(L,{type:"date",value:Gt,onChange:function(t){return Jt(t.target.value)}})]}),Object(w.jsxs)("label",{children:["Bonus:"," ",Object(w.jsx)(G,{value:Xt,onChange:function(t){return qt(t.target.value)},children:u.b.map((function(t){return Object(w.jsx)("option",{value:t.value,children:t.name},t.value)}))})]})]}):null]}),Object(w.jsx)(J,{style:{width:"".concat(Wt?100:100+3*Math.max((null!==(e=null===$t||void 0===$t?void 0:$t.length)&&void 0!==e?e:0)-50,0),"%")},children:$t?Object(w.jsx)(j.a,{children:Object(w.jsxs)(b.a,{data:$t,onClick:function(t){t&&("all"===it&&"all"===pt&&"all"===At&&"all"===Dt||"clientes"!==y)&&("clientes"===y?"country"!==z||$?"age"!==z||V||(X("country"),tt(null===t||void 0===t?void 0:t.activePayload[0].payload.ageRange.split("-"))):(X("age"),W(null===t||void 0===t?void 0:t.activePayload[0].payload.country)):"puntos"===y&&("country"!==z||$&&nt?"age"!==z||V&&nt?"hours"!==z||V&&$||(V?$||X("age"):X("country"),ct(null===t||void 0===t?void 0:t.activeTooltipIndex)):(X(V?"hours":"country"),tt(null===t||void 0===t?void 0:t.activePayload[0].payload.ageRange.split("-"))):(X($?"hours":"age"),W(null===t||void 0===t?void 0:t.activePayload[0].payload.country))))},children:[Object(w.jsx)(p.a,{formatter:function(t,e){return"cartas24"===y?[t,"all"===e?"Todos":e]:"puntos"===y&&"dateRange"===z?[t,u.b.find((function(t){return t.value===e})).name]:[t,"notContacted"===e?"No contactados":"contacted"===e?"Contactados":"pointed"===e?"Punteados":"total"===e?"Total":"."]},contentStyle:{backgroundColor:"#333333"}}),Object(w.jsx)(O.a,{strokeDasharray:"3 3"}),Object(w.jsx)(h.a,{dataKey:"cartas24"===y?"day":"country"===z?"country":"age"===z?"ageRange":"hours"===z?"hour":"day"}),Object(w.jsx)(v.a,{}),S(y,it,pt,z,$t,ee,gt)]})},z+(Wt?"c":"nc")):null})]})})}}}]);