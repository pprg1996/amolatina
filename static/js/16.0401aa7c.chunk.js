(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[16],{110:function(e,t,n){"use strict";var i=n(9),a=n(99),r=n(0),o=n(1),s=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,160))}));t.a=function(e){var t=e.id,n=e.nombre,d=e.foto,l=e.puntos1,c=e.puntos2,u=e.summary1,p=e.summary2,b=e.supervisorId,j=e.usarMultasOAvisos,m=e.noModal,f=e.tipoEntidad,O=e.amolatinaId,v=e.metaDia,h=e.metaMes,g=e.latestFeedTimestamp,x=e.fineCount,y=e.fineAlertCount,C=e.online,T=e.mingle,S=e.introductory,k=e.operador,M=e.operadorDePausa,w=e.operadoresAsignadosIds,I=e.missingMingleTimestamp,P=e.offlineTimestamp,A=e.unrepliedLettersTimestamps,D=e.token,F=e.perfiles,L=e.perfilesPausados,E=e.pausado,J=Object(r.useState)(!1),z=Object(i.a)(J,2),B=z[0],N=z[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){return N(!0)},children:Object(o.jsx)(a.a,{id:t,nombre:n,foto:d,puntos1:l,puntos2:c,summary1:u,summary2:p,tipoEntidad:f,meta1:v,meta2:h,latestFeedTimestamp:g,usarMultasOAvisos:j,fineCount1:null===x||void 0===x?void 0:x.dia,fineAlertCount1:null===y||void 0===y?void 0:y.dia,fineCount2:null===x||void 0===x?void 0:x.mes,fineAlertCount2:null===y||void 0===y?void 0:y.mes,online:C,mingle:T,introductory:S,operador:k,operadorDePausa:M,operadoresAsignadosIds:w,missingMingleTimestamp:I,offlineTimestamp:P,unrepliedLettersTimestamps:A,token:D,perfiles:F,perfilesPausados:L,pausado:E})}),B&&!m?Object(o.jsx)(r.Suspense,{fallback:Object(o.jsx)("div",{children:"Loading..."}),children:Object(o.jsx)(s,{id:t,nombre:n,foto:d,setShowModal:N,supervisorId:b,tipoEntidad:f,amolatinaId:O})}):null]})}},411:function(e,t,n){"use strict";n.r(t);var i=n(4),a=n(2),r=n.n(a),o=n(8),s=n(9),d=n(5),l=n(78),c=n(6),u=n(10),p=n(110),b=n(0),j=n(104),m=n(159),f=n(12),O=n.n(f),v=n(40),h=n(1),g=Object(b.lazy)((function(){return n.e(21).then(n.bind(null,387))})),x=Object(b.lazy)((function(){return Promise.all([n.e(2),n.e(10)]).then(n.bind(null,398))})),y=Object(b.lazy)((function(){return Promise.all([n.e(2),n.e(7),n.e(11)]).then(n.bind(null,395))})),C=d.d.div.withConfig({displayName:"Perfiles__PerfilesDiv",componentId:"m36yex-0"})(["margin-top:12px;padding:20px 48px 20px 16px;display:grid;gap:32px;grid-template-columns:repeat(4,minmax(0,1fr));overflow-x:hidden;align-items:start;",""],l.b);t.default=function(e){var t,n=e.orden,a=e.multasOAvisos,d=Object(u.d)(["perfiles"],c.fetchPerfiles).data,l=Object(u.d)(["operadores"],c.fetchOperadores).data,f=null===l||void 0===l||null===(t=l.find((function(e){return e.id===+O.a.get("id")})))||void 0===t?void 0:t.pausado,T=Object(b.useContext)(j.b),S=Object(b.useState)(!1),k=Object(s.a)(S,2),M=k[0],w=k[1],I=Object(b.useState)(!1),P=Object(s.a)(I,2),A=P[0],D=P[1],F=Object(b.useState)(!1),L=Object(s.a)(F,2),E=L[0],J=L[1],z=Object(b.useState)(0),B=Object(s.a)(z,2),N=B[0],_=B[1],G=O.a.get("role"),Q=+O.a.get("id"),H=Object(b.useState)(!1),U=Object(s.a)(H,2),Y=U[0],q=U[1],K=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),(i=t.currentTarget).disabled=!0,e.next=5,Object(c.customFetch)("/profiles/select",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[n]}),method:"POST"});case 5:a=e.sent,Object(c.errorPerfilesToast)(a,"toma"),setTimeout((function(){u.b.invalidateQueries("perfiles"),q(!1),i.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),(i=t.currentTarget).disabled=!0,e.next=5,Object(c.customFetch)("/profiles/release",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[n]}),method:"POST"});case 5:a=e.sent,Object(c.errorPerfilesToast)(a,"liberacion"),setTimeout((function(){u.b.invalidateQueries("perfiles"),q(!1),i.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsxs)(C,{children:[null===d||void 0===d?void 0:d.filter((function(e){return e.activo})).sort((function(e,t){var i=function(e){var t;return(null===(t=e.operador)||void 0===t?void 0:t.id)===Q?2e6:0},a=function(e){return e.libre?1e6:0};return"dia"===n?t.progresoDia+i(t)+a(t)-(e.progresoDia+i(e)+a(e)):t.progresoMes+i(t)+a(t)-(e.progresoMes+i(e)+a(e))})).map((function(e){for(var t,n,s=0,d=0;d<((null===T||void 0===T?void 0:T.length)||-1);d++)if(e.id===+T[d].perfilId&&"feeds"===T[d].tablename){var l=new Date(T[d].timestamp);s=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds());break}return Object(h.jsxs)(b.Fragment,{children:[Object(h.jsx)(m.b,{id:""+e.id,children:Y?Object(h.jsx)(v.a,{}):Object(h.jsx)(p.a,Object(i.a)(Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{summary1:e.diaSummary,summary2:e.mesSummary,puntos1:e.progresoDia,puntos2:e.progresoMes,latestFeedTimestamp:s,usarMultasOAvisos:a})),{},{tipoEntidad:"perfil"}),e.id)}),+O.a.get("id")!==c.ghostAdminId?Object(h.jsxs)(m.a,{id:""+e.id,children:["admin"!==G&&e.libre&&!f?Object(h.jsx)(m.c,{onClick:function(t){return K(t,e.id)},children:"Tomar"}):null,"admin"===G||(null===(t=e.operador)||void 0===t?void 0:t.id)!==Q||f?null:Object(h.jsx)(m.c,{onClick:function(t){return R(t,e.id)},children:"Liberar"}),Object(h.jsx)(m.c,{onClick:function(){J(!0),_(e.id)},children:"Configurar Token"}),"admin"===G||"supervisor"===G||(null===(n=e.operador)||void 0===n?void 0:n.id)===Q?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m.c,{onClick:function(){w(!0),_(e.id)},children:"Configurar Bot 24"}),Object(h.jsx)(m.c,{onClick:function(){D(!0),_(e.id)},children:"Configurar Super Bot"}),Object(h.jsx)(m.c,{onClick:function(){return navigator.clipboard.writeText(e.amolatinaId)},children:"Copiar ID"}),Object(h.jsx)(m.c,{onClick:Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.customFetch)("/goals/set-auto-goal",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({profileId:e.id,autoGoal:!e.autoGoal})});case 2:u.b.invalidateQueries(["perfiles"]);case 3:case"end":return t.stop()}}),t)}))),children:e.autoGoal?"Apagar meta automatica":"Encender meta automatica"})]}):null]}):null]},e.id)})),E?Object(h.jsx)(b.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsx)(g,{perfilId:N,setShowTokenModal:J})}):null,M?Object(h.jsx)(b.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsx)(x,{perfilId:N,setShowCartas24BotModal:w})}):null,A?Object(h.jsx)(b.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsx)(y,{perfilId:N,setShowSuperCartasBotModal:D})}):null]})}}}]);