(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[22],{418:function(e,t,r){"use strict";r.r(t);var n,a,i,o,c,l,s=r(20),f=r(4),d=r(21),p=r(5),b=r(43),u=r(44),m=r(9),j=r(14),h=r(0),O=r(85),v=["title","titleId"];function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function x(e,t){var r=e.title,s=e.titleId,f=y(e,v);return h.createElement("svg",g({id:"b4a22bbc-cdd2-437b-b229-3a26676ab455","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 735.26 370",ref:t,"aria-labelledby":s},f),r?h.createElement("title",{id:s},r):null,n||(n=h.createElement("path",{d:"M497,370H15A15,15,0,0,1,0,355V15A15,15,0,0,1,15,0H497a15,15,0,0,1,15,15V355A15,15,0,0,1,497,370Z",fill:"#f79b00"})),a||(a=h.createElement("path",{d:"M497,0H256V370H497a15,15,0,0,0,15-15V15A15,15,0,0,0,497,0Z",fill:"#f28300"})),i||(i=h.createElement("path",{d:"M512,15A15,15,0,0,0,497,0H15A15,15,0,0,0,0,15v7.78L247.35,197.26a15,15,0,0,0,17.3,0L512,22.78Z",fill:"#fbb200"})),o||(o=h.createElement("path",{d:"M146.6,310H75a15,15,0,0,1,0-30h71.6a15,15,0,1,1,0,30Z",fill:"#fffff2"})),c||(c=h.createElement("path",{d:"M497,0H256V200a15,15,0,0,0,8.65-2.74L512,22.78V15A15,15,0,0,0,497,0Z",fill:"#f79b00"})),l||(l=h.createElement("polygon",{points:"630.99 85.73 606.4 110.32 686.08 190 606.4 269.68 630.99 294.27 735.26 190 630.99 85.73",fill:"#fff"})))}var w,C=h.forwardRef(x),_=(r.p,["title","titleId"]);function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function z(e,t){var r=e.title,n=e.titleId,a=N(e,_);return h.createElement("svg",I({id:"e5d591a6-4fca-4d72-9ccc-c114fcffa51f","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 384",ref:t,"aria-labelledby":n},a),r?h.createElement("title",{id:n},r):null,w||(w=h.createElement("path",{d:"M0,208.34,175.33,384,512,47.67,463.67,0,175.33,288,47.66,160.33Z",fill:"#fff"})))}var E,S=h.forwardRef(z),T=(r.p,r(6)),M=r(173),k=r(112),A=r(113),D=r(78),P=r(1),H=Object(p.d)(M.a).withConfig({displayName:"CartaTimer__CoronaSvg",componentId:"sc-1z12nby-0"})(["",""],D.a),R=Object(p.d)(k.a).withConfig({displayName:"CartaTimer__CorazonSvg",componentId:"sc-1z12nby-1"})(["",""],D.a),B=Object(p.d)(A.a).withConfig({displayName:"CartaTimer__CorazonGreenSvg",componentId:"sc-1z12nby-2"})(["",""],D.a),V=p.d.div.withConfig({displayName:"CartaTimer__CartaTimerDiv",componentId:"sc-1z12nby-3"})(["position:relative;margin:25px 16px;.email-arrow{position:absolute;width:64px;height:auto;top:25%;left:50%;transform:translate(-50%,20%);}"]),Z=p.d.div.withConfig({displayName:"CartaTimer__CartaContent",componentId:"sc-1z12nby-4"})(["width:320px;padding:28px 8px 16px 8px;display:flex;justify-content:space-between;align-items:center;"]),F=p.d.svg.withConfig({displayName:"CartaTimer__TimerSvg",componentId:"sc-1z12nby-5"})(["position:absolute;width:100%;height:100%;.timer-track{stroke:",";stroke-width:1px;width:calc(100% - 4px);height:calc(100% - 4px);}.timer-progreso{width:calc(100% - 4px);height:calc(100% - 4px);stroke:",";stroke-width:4px;stroke-dasharray:"," ",";}"],(function(e){var t=e.porcentaje;return t>66?"#1a2480":t>33?"#7e801a":"#801a1a"}),(function(e){var t=e.porcentaje;return t>66?"#3347ff":t>33?"#fcff33":"#ff3333"}),(function(e){return e.perimetro}),(function(e){return e.perimetro})),L=p.d.span.withConfig({displayName:"CartaTimer__Tiempo",componentId:"sc-1z12nby-6"})(["position:absolute;color:white;font-size:0.75rem;font-weight:300;left:24px;top:-24px;"]),J=Object(p.d)(S).withConfig({displayName:"CartaTimer__CheckMarkSvg",componentId:"sc-1z12nby-7"})(["position:absolute;width:12px;height:auto;top:-22px;left:73px;"]),G=p.d.div.withConfig({displayName:"CartaTimer__PicDiv",componentId:"sc-1z12nby-8"})(["position:relative;"]),W=Object(p.d)(G).withConfig({displayName:"CartaTimer___StyledPicDiv",componentId:"sc-1z12nby-9"})(["",""],(function(e){return e._css2})),q=p.d.img.withConfig({displayName:"CartaTimer__Foto",componentId:"sc-1z12nby-10"})(["width:64px;height:64px;border-radius:100%;border:2px solid #17171c;object-fit:cover;margin-bottom:10px;"]),K=p.d.span.withConfig({displayName:"CartaTimer__Nombre",componentId:"sc-1z12nby-11"})(["font-size:0.75rem;font-weight:300;color:white;"]),Q=p.d.div.withConfig({displayName:"CartaTimer__AvatarDiv",componentId:"sc-1z12nby-12"})(["margin:0 24px;",""],(function(e){return"right"===e.position?Object(p.c)(E||(E=Object(j.a)(["\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n        "]))):""})),U=function(e){var t=e.perfilNombre,r=e.perfilFoto,n=e.corazones,a=e.clienteNombre,i=e.clienteFoto,o=void 0===i?O.a:i,c=e.coronas,l=e.clienteAmolatinaId,s=e.tiempoLlegada,f=e.leida,d=(e.respondida,e.timerDuracionMinutos),p=Object(h.useRef)(null),b=Object(h.useState)(0),u=Object(m.a)(b,2),j=u[0],v=u[1],g=Object(h.useState)(0),y=Object(m.a)(g,2),x=y[0],w=y[1],_=Object(h.useState)(Math.floor(s/60)+d-Math.floor(Date.now()/6e4)),I=Object(m.a)(_,2),N=I[0],z=I[1],E=Object(h.useState)(0),S=Object(m.a)(E,2),M=S[0],k=S[1],A=Object(h.useRef)(0),D=Object(h.useState)([]),U=Object(m.a)(D,2),X=U[0],Y=U[1],$=Object(h.useState)([]),ee=Object(m.a)($,2),te=ee[0],re=ee[1],ne=Object(h.useState)(1),ae=Object(m.a)(ne,2),ie=ae[0],oe=ae[1],ce=Object(h.useState)(100),le=Object(m.a)(ce,2),se=le[0],fe=le[1],de=Object(h.useRef)(),pe=Object(T.useCopyTextOnClick)(de,l);return Object(h.useEffect)((function(){Y(Object(T.organizadorRadial)(H,12,32,40,c,11.25))}),[c]),Object(h.useEffect)((function(){var e=Object(T.reducirCorazones)(n,R,B),t=Object(m.a)(e,2),r=t[0],a=t[1];re(Object(T.organizadorRadial)(r,12,32,40,a,11.25))}),[n]),Object(h.useEffect)((function(){return A.current=setInterval((function(){var e=Math.floor(s)+60*d-Math.floor(Date.now()/1e3);z(Math.floor(e/60)),k(e-60*Math.floor(e/60)),e<=0&&(clearInterval(A.current),z(0),k(0))}),333),function(){clearInterval(A.current)}}),[]),Object(h.useEffect)((function(){v(p.current.getBBox().width),w(p.current.getBBox().height),oe(2*(j-10)+2*(x-10)+2*Math.PI*5)}),[x,j]),Object(h.useEffect)((function(){fe((M+60*N)/(60*d)*100)}),[N,M,d]),Object(P.jsxs)(V,{children:[Object(P.jsxs)(L,{children:[N<10?"0".concat(N):N,":",M<10?"0".concat(M):M]}),f?Object(P.jsx)(J,{}):null,Object(P.jsxs)(F,{ref:p,porcentaje:se,perimetro:ie,children:[Object(P.jsx)("rect",{className:"timer-track",x:2,y:2,rx:5,ry:5,fill:"none"}),Object(P.jsx)("rect",{className:"timer-progreso",x:2,y:2,rx:5,ry:5,fill:"none",strokeDashoffset:ie-ie/100*se})]}),Object(P.jsxs)(Z,{children:[Object(P.jsxs)(Q,{children:[Object(P.jsxs)(W,{ref:de,_css2:pe,children:[X,Object(P.jsx)(q,{src:null!==o&&void 0!==o?o:O.a,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src=O.a}})]}),Object(P.jsx)(K,{children:a})]}),Object(P.jsx)(C,{className:"email-arrow"}),Object(P.jsxs)(Q,{position:"right",children:[Object(P.jsxs)(G,{children:[te,Object(P.jsx)(q,{src:r})]}),Object(P.jsx)(K,{children:t})]})]})]})},X=r(10),Y=p.d.div.withConfig({displayName:"CartasAdminContainer__CartasDiv",componentId:"rb4u26-0"})([""," ",""],{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:"2rem"},D.b),$=Object(p.d)(b.a).withConfig({displayName:"CartasAdminContainer___StyledContainer",componentId:"rb4u26-1"})({width:"100%",height:"100%"});t.default=function(e){var t,r=e.entidadSeleccionada,n=Object(X.d)(["operadores"],T.fetchOperadores).data,a=function(e){var t=[];null===e||void 0===e||e.forEach((function(e){e.perfiles&&t.push.apply(t,Object(d.a)(e.perfiles))}));var r=t.map((function(e){return e.cartas.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{perfil:e,cliente:t.cliente,operadorId:e.operador.id})}))})).flat();return r.map((function(e){var t=e.id,r=e.read_timestamp,n=e.replied,a=e.timestamp,i=e.cliente,o=e.perfil,c=e.operadorId;return{id:t,perfilNombre:o.nombre,perfilFoto:o.foto,corazones:o.corazones,clienteNombre:i.nombre,clienteFoto:null===i||void 0===i?void 0:i.foto,coronas:i.coronas,clienteAmolatinaId:i.amolatinaId,tiempoLlegada:Math.floor(a/1e3),leida:!!r,respondida:n,operadorId:c}}))}(n);return Object(P.jsxs)($,{children:[Object(P.jsx)(u.b,{position:"left",txt:"Cartas"}),Object(P.jsx)(Y,{children:null===(t=a.filter((function(e){if("supervisor"!==r)return!0;var t,a=Object(s.a)(r.ids);try{for(a.s();!(t=a.n()).done;){var i=t.value;if((null===n||void 0===n?void 0:n.find((function(t){return t.id===e.operadorId})).supervisorId)===Number(i))return!0}}catch(o){a.e(o)}finally{a.f()}return!1})))||void 0===t?void 0:t.map((function(e){return Object(P.jsx)(U,Object(f.a)(Object(f.a)({},e),{},{timerDuracionMinutos:30}),e.id)}))})]})}}}]);