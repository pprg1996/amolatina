(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[16],{110:function(e,t,i){"use strict";var n=i(9),a=i(99),r=i(0),o=i(1),s=Object(r.lazy)((function(){return Promise.all([i.e(0),i.e(11)]).then(i.bind(null,160))}));t.a=function(e){var t=e.id,i=e.nombre,d=e.foto,l=e.puntos1,c=e.puntos2,u=e.summary1,p=e.summary2,m=e.supervisorId,f=e.usarMultasOAvisos,b=e.noModal,j=e.tipoEntidad,O=e.amolatinaId,h=e.metaDia,g=e.metaMes,x=e.latestFeedTimestamp,v=e.fineCount,y=e.fineAlertCount,C=e.online,S=e.mingle,T=e.introductory,w=e.operador,k=e.operadorDePausa,M=e.operadoresAsignadosIds,I=e.missingMingleTimestamp,P=e.offlineTimestamp,A=e.unrepliedLettersTimestamps,D=e.token,_=e.perfiles,F=e.perfilesPausados,z=e.pausado,L=e.typeWidth,N=Object(r.useState)(!1),B=Object(n.a)(N,2),E=B[0],J=B[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){return J(!0)},children:Object(o.jsx)(a.a,{typeWidth:L,id:t,nombre:i,foto:d,puntos1:l,puntos2:c,summary1:u,summary2:p,tipoEntidad:j,meta1:h,meta2:g,latestFeedTimestamp:x,usarMultasOAvisos:f,fineCount1:null===v||void 0===v?void 0:v.dia,fineAlertCount1:null===y||void 0===y?void 0:y.dia,fineCount2:null===v||void 0===v?void 0:v.mes,fineAlertCount2:null===y||void 0===y?void 0:y.mes,online:C,mingle:S,introductory:T,operador:w,operadorDePausa:k,operadoresAsignadosIds:M,missingMingleTimestamp:I,offlineTimestamp:P,unrepliedLettersTimestamps:A,token:D,perfiles:_,perfilesPausados:F,pausado:z})}),E&&!b?Object(o.jsx)(r.Suspense,{fallback:Object(o.jsx)("div",{children:"Loading..."}),children:Object(o.jsx)(s,{id:t,nombre:i,foto:d,setShowModal:J,supervisorId:m,tipoEntidad:j,amolatinaId:O})}):null]})}},412:function(e,t,i){"use strict";i.r(t);var n,a=i(4),r=i(2),o=i.n(r),s=i(8),d=i(9),l=i(10),c=i(5),u=i(78),p=i(6),m=i(11),f=i(110),b=i(0),j=i(104),O=i(159),h=i(13),g=i.n(h),x=i(40),v=i(1),y=Object(b.lazy)((function(){return i.e(21).then(i.bind(null,388))})),C=Object(b.lazy)((function(){return Promise.all([i.e(2),i.e(9)]).then(i.bind(null,399))})),S=Object(b.lazy)((function(){return Promise.all([i.e(2),i.e(7),i.e(10)]).then(i.bind(null,396))})),T=c.d.div.withConfig({displayName:"Perfiles__PerfilesDiv",componentId:"m36yex-0"})([""," "," ",""],Object(c.c)(n||(n=Object(l.a)(["\n    @media (min-width: 2560px) {\n      padding-top: 20px !important;\n      padding-right: 10px !important;\n      padding-left: 16px !important;\n      grid-gap: 32px !important;\n    }\n  "]))),{marginTop:"12px",paddingBottom:"20px",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",display:"grid",alignItems:"flex-start",overflowX:"hidden","@media (min-width: 768px)":{paddingTop:"5px",paddingRight:"4px",paddingLeft:"4px",gap:"10px"},"@media (min-width: 1024px)":{gap:"12px",paddingTop:"10px",paddingRight:"6px"}},u.b),w=Object(c.d)(O.a).withConfig({displayName:"Perfiles___StyledContextMenu",componentId:"m36yex-1"})(["@media (min-width:2560px){font-size:1rem !important;}"]),k=Object(c.d)(w).withConfig({displayName:"Perfiles___Styled_StyledContextMenu",componentId:"m36yex-2"})({"@media (min-width: 768px)":{fontSize:"0.3rem"},"@media (min-width: 1024px)":{fontSize:"0.5rem"},"@media (min-width: 1280px)":{fontSize:"0.7rem"}});t.default=function(e){var t,i=e.orden,n=e.multasOAvisos,r=e.typeWidth,l=Object(m.d)(["perfiles"],p.fetchPerfiles).data,c=Object(m.d)(["operadores"],p.fetchOperadores).data,u=null===c||void 0===c||null===(t=c.find((function(e){return e.id===+g.a.get("id")})))||void 0===t?void 0:t.pausado,h=Object(b.useContext)(j.b),w=Object(b.useState)(!1),M=Object(d.a)(w,2),I=M[0],P=M[1],A=Object(b.useState)(!1),D=Object(d.a)(A,2),_=D[0],F=D[1],z=Object(b.useState)(!1),L=Object(d.a)(z,2),N=L[0],B=L[1],E=Object(b.useState)(0),J=Object(d.a)(E,2),W=J[0],G=J[1],Q=g.a.get("role"),R=+g.a.get("id"),H=Object(b.useState)(!1),U=Object(d.a)(H,2),X=U[0],Y=U[1],q=function(){var e=Object(s.a)(o.a.mark((function e(t,i){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(p.customFetch)("/profiles/select",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:a=e.sent,Object(p.errorPerfilesToast)(a,"toma"),setTimeout((function(){m.b.invalidateQueries("perfiles"),Y(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(o.a.mark((function e(t,i){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),(n=t.currentTarget).disabled=!0,e.next=5,Object(p.customFetch)("/profiles/release",{headers:{"Content-Type":"application/json"},body:JSON.stringify({list_id:[i]}),method:"POST"});case 5:a=e.sent,Object(p.errorPerfilesToast)(a,"liberacion"),setTimeout((function(){m.b.invalidateQueries("perfiles"),Y(!1),n.disabled=!1}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return Object(v.jsxs)(T,{children:[null===l||void 0===l?void 0:l.filter((function(e){return e.activo})).sort((function(e,t){var n=function(e){var t;return(null===(t=e.operador)||void 0===t?void 0:t.id)===R?2e6:0},a=function(e){return e.libre?1e6:0};return"dia"===i?t.progresoDia+n(t)+a(t)-(e.progresoDia+n(e)+a(e)):t.progresoMes+n(t)+a(t)-(e.progresoMes+n(e)+a(e))})).map((function(e){for(var t,i,d=0,l=0;l<((null===h||void 0===h?void 0:h.length)||-1);l++)if(e.id===+h[l].perfilId&&"feeds"===h[l].tablename){var c=new Date(h[l].timestamp);d=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());break}return Object(v.jsxs)(b.Fragment,{children:[Object(v.jsx)(O.b,{id:""+e.id,children:X?Object(v.jsx)(x.a,{}):Object(v.jsx)(f.a,Object(a.a)(Object(a.a)({typeWidth:r},Object(a.a)(Object(a.a)({},e),{},{summary1:e.diaSummary,summary2:e.mesSummary,puntos1:e.progresoDia,puntos2:e.progresoMes,latestFeedTimestamp:d,usarMultasOAvisos:n})),{},{tipoEntidad:"perfil"}),e.id)}),+g.a.get("id")!==p.ghostAdminId?Object(v.jsxs)(k,{id:""+e.id,children:["admin"!==Q&&e.libre&&!u?Object(v.jsx)(O.c,{onClick:function(t){return q(t,e.id)},children:"Tomar"}):null,"admin"===Q||(null===(t=e.operador)||void 0===t?void 0:t.id)!==R||u?null:Object(v.jsx)(O.c,{onClick:function(t){return K(t,e.id)},children:"Liberar"}),Object(v.jsx)(O.c,{onClick:function(){B(!0),G(e.id)},children:"Configurar Token"}),"admin"===Q||"supervisor"===Q||(null===(i=e.operador)||void 0===i?void 0:i.id)===R?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.c,{onClick:function(){P(!0),G(e.id)},children:"Configurar Bot 24"}),Object(v.jsx)(O.c,{onClick:function(){F(!0),G(e.id)},children:"Configurar Super Bot"}),Object(v.jsx)(O.c,{onClick:function(){return navigator.clipboard.writeText(e.amolatinaId)},children:"Copiar ID"}),Object(v.jsx)(O.c,{onClick:Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.customFetch)("/goals/set-auto-goal",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({profileId:e.id,autoGoal:!e.autoGoal})});case 2:m.b.invalidateQueries(["perfiles"]);case 3:case"end":return t.stop()}}),t)}))),children:e.autoGoal?"Apagar meta automatica":"Encender meta automatica"})]}):null]}):null]},e.id)})),N?Object(v.jsx)(b.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsx)(y,{perfilId:W,setShowTokenModal:B})}):null,I?Object(v.jsx)(b.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsx)(C,{perfilId:W,setShowCartas24BotModal:P})}):null,_?Object(v.jsx)(b.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsx)(S,{perfilId:W,setShowSuperCartasBotModal:F})}):null]})}}}]);