(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[22],{418:function(e,t,r){"use strict";r.r(t);var n,a,i,o,c,l,d=r(19),s=r(4),p=r(20),f=r(5),b=r(44),m=r(9),u=r(22),j=r(0),h=r(85),O=["title","titleId"];function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function v(e,t){var r=e.title,d=e.titleId,s=g(e,O);return j.createElement("svg",y({id:"b4a22bbc-cdd2-437b-b229-3a26676ab455","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 735.26 370",ref:t,"aria-labelledby":d},s),r?j.createElement("title",{id:d},r):null,n||(n=j.createElement("path",{d:"M497,370H15A15,15,0,0,1,0,355V15A15,15,0,0,1,15,0H497a15,15,0,0,1,15,15V355A15,15,0,0,1,497,370Z",fill:"#f79b00"})),a||(a=j.createElement("path",{d:"M497,0H256V370H497a15,15,0,0,0,15-15V15A15,15,0,0,0,497,0Z",fill:"#f28300"})),i||(i=j.createElement("path",{d:"M512,15A15,15,0,0,0,497,0H15A15,15,0,0,0,0,15v7.78L247.35,197.26a15,15,0,0,0,17.3,0L512,22.78Z",fill:"#fbb200"})),o||(o=j.createElement("path",{d:"M146.6,310H75a15,15,0,0,1,0-30h71.6a15,15,0,1,1,0,30Z",fill:"#fffff2"})),c||(c=j.createElement("path",{d:"M497,0H256V200a15,15,0,0,0,8.65-2.74L512,22.78V15A15,15,0,0,0,497,0Z",fill:"#f79b00"})),l||(l=j.createElement("polygon",{points:"630.99 85.73 606.4 110.32 686.08 190 606.4 269.68 630.99 294.27 735.26 190 630.99 85.73",fill:"#fff"})))}var x,_=j.forwardRef(v),w=(r.p,["title","titleId"]);function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function I(e,t){var r=e.title,n=e.titleId,a=S(e,w);return j.createElement("svg",C({id:"e5d591a6-4fca-4d72-9ccc-c114fcffa51f","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 384",ref:t,"aria-labelledby":n},a),r?j.createElement("title",{id:n},r):null,x||(x=j.createElement("path",{d:"M0,208.34,175.33,384,512,47.67,463.67,0,175.33,288,47.66,160.33Z",fill:"#fff"})))}var z,N=j.forwardRef(I),T=(r.p,r(6)),E=r(173),M=r(112),k=r(113),D=r(78),A=r(1),R=Object(f.d)(E.a).withConfig({displayName:"CartaTimer__CoronaSvg",componentId:"sc-1z12nby-0"})(["",""],D.a),B=Object(f.d)(M.a).withConfig({displayName:"CartaTimer__CorazonSvg",componentId:"sc-1z12nby-1"})(["",""],D.a),H=Object(f.d)(k.a).withConfig({displayName:"CartaTimer__CorazonGreenSvg",componentId:"sc-1z12nby-2"})(["",""],D.a),P=Object(f.c)(z||(z=Object(u.a)(["\n  .email-arrow {\n    ","\n\n    transform: translate(-50%, 20%);\n  }\n"])),{position:"absolute",width:"64px",height:"auto",top:"25%",left:"50%"}),F=f.d.svg.withConfig({displayName:"CartaTimer__TimerSvg",componentId:"sc-1z12nby-3"})([".timer-track{stroke:",";stroke-width:1px;width:calc(100% - 4px);height:calc(100% - 4px);}.timer-progreso{width:calc(100% - 4px);height:calc(100% - 4px);stroke:",";stroke-width:4px;stroke-dasharray:"," ",";}"],(function(e){var t=e.porcentaje;return t>66?"#1a2480":t>33?"#7e801a":"#801a1a"}),(function(e){var t=e.porcentaje;return t>66?"#3347ff":t>33?"#fcff33":"#ff3333"}),(function(e){return e.perimetro}),(function(e){return e.perimetro})),V=Object(f.d)(F).withConfig({displayName:"CartaTimer___StyledTimerSvg",componentId:"sc-1z12nby-7"})({position:"absolute",width:"100%",height:"100%"}),W=f.d.div.withConfig({displayName:"CartaTimer__AvatarDiv",componentId:"sc-1z12nby-4"})(["",""],(function(e){return"right"===e.position?{display:"flex",flexDirection:"column",alignItems:"flex-end"}:""})),Z=Object(f.d)(W).withConfig({displayName:"CartaTimer___StyledAvatarDiv",componentId:"sc-1z12nby-8"})({margin:"0 24px"}),L=Object(f.d)("div").withConfig({displayName:"CartaTimer___StyledDiv",componentId:"sc-1z12nby-5"})(["",""],(function(e){return e._css})),J=Object(f.d)(L).withConfig({displayName:"CartaTimer___Styled_StyledDiv",componentId:"sc-1z12nby-9"})({position:"relative",margin:"25px 16px"}),G=Object(f.d)("div").withConfig({displayName:"CartaTimer___StyledDiv2",componentId:"sc-1z12nby-6"})(["",""],(function(e){return e._css2})),q=Object(f.d)(G).withConfig({displayName:"CartaTimer___Styled_StyledDiv2",componentId:"sc-1z12nby-10"})({position:"relative"}),K=Object(f.d)("span").withConfig({displayName:"CartaTimer___StyledSpan",componentId:"sc-1z12nby-11"})({position:"absolute","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontSize:"0.75rem",fontWeight:"300",left:"24px",top:"-24px"}),Q=Object(f.d)(N).withConfig({displayName:"CartaTimer___StyledCheckMarkSvgRaw",componentId:"sc-1z12nby-12"})({position:"absolute",width:"12px",height:"auto",top:"-22px",left:"73px"}),U=Object(f.d)("div").withConfig({displayName:"CartaTimer___StyledDiv3",componentId:"sc-1z12nby-13"})({width:"320px",padding:"28px 8px 16px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"}),X=Object(f.d)("img").withConfig({displayName:"CartaTimer___StyledImg",componentId:"sc-1z12nby-14"})({width:"64px",height:"64px",borderRadius:"100%",borderWidth:"2px",borderStyle:"solid",borderColor:"#17171c",objectFit:"cover",marginBottom:"10px"}),Y=Object(f.d)("span").withConfig({displayName:"CartaTimer___StyledSpan2",componentId:"sc-1z12nby-15"})({fontSize:"0.75rem",fontWeight:"300","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}),$=Object(f.d)("div").withConfig({displayName:"CartaTimer___StyledDiv4",componentId:"sc-1z12nby-16"})({position:"relative"}),ee=Object(f.d)("img").withConfig({displayName:"CartaTimer___StyledImg2",componentId:"sc-1z12nby-17"})({width:"64px",height:"64px",borderRadius:"100%",borderWidth:"2px",borderStyle:"solid",borderColor:"#17171c",objectFit:"cover",marginBottom:"10px"}),te=Object(f.d)("span").withConfig({displayName:"CartaTimer___StyledSpan3",componentId:"sc-1z12nby-18"})({fontSize:"0.75rem",fontWeight:"300","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}),re=function(e){var t=e.perfilNombre,r=e.perfilFoto,n=e.corazones,a=e.clienteNombre,i=e.clienteFoto,o=void 0===i?h.a:i,c=e.coronas,l=e.clienteAmolatinaId,d=e.tiempoLlegada,s=e.leida,p=(e.respondida,e.timerDuracionMinutos),f=Object(j.useRef)(null),b=Object(j.useState)(0),u=Object(m.a)(b,2),O=u[0],y=u[1],g=Object(j.useState)(0),v=Object(m.a)(g,2),x=v[0],w=v[1],C=Object(j.useState)(Math.floor(d/60)+p-Math.floor(Date.now()/6e4)),S=Object(m.a)(C,2),I=S[0],z=S[1],N=Object(j.useState)(0),E=Object(m.a)(N,2),M=E[0],k=E[1],D=Object(j.useRef)(0),F=Object(j.useState)([]),L=Object(m.a)(F,2),G=L[0],re=L[1],ne=Object(j.useState)([]),ae=Object(m.a)(ne,2),ie=ae[0],oe=ae[1],ce=Object(j.useState)(1),le=Object(m.a)(ce,2),de=le[0],se=le[1],pe=Object(j.useState)(100),fe=Object(m.a)(pe,2),be=fe[0],me=fe[1],ue=Object(j.useRef)(),je=Object(T.useCopyTextOnClick)(ue,l);return Object(j.useEffect)((function(){re(Object(T.organizadorRadial)(R,12,32,40,c,11.25))}),[c]),Object(j.useEffect)((function(){var e=Object(T.reducirCorazones)(n,B,H),t=Object(m.a)(e,2),r=t[0],a=t[1];oe(Object(T.organizadorRadial)(r,12,32,40,a,11.25))}),[n]),Object(j.useEffect)((function(){return D.current=setInterval((function(){var e=Math.floor(d)+60*p-Math.floor(Date.now()/1e3);z(Math.floor(e/60)),k(e-60*Math.floor(e/60)),e<=0&&(clearInterval(D.current),z(0),k(0))}),333),function(){clearInterval(D.current)}}),[]),Object(j.useEffect)((function(){y(f.current.getBBox().width),w(f.current.getBBox().height),se(2*(O-10)+2*(x-10)+2*Math.PI*5)}),[x,O]),Object(j.useEffect)((function(){me((M+60*I)/(60*p)*100)}),[I,M,p]),Object(A.jsxs)(J,{_css:[P],children:[Object(A.jsxs)(K,{children:[I<10?"0".concat(I):I,":",M<10?"0".concat(M):M]}),s?Object(A.jsx)(Q,{}):null,Object(A.jsxs)(V,{ref:f,porcentaje:be,perimetro:de,children:[Object(A.jsx)("rect",{className:"timer-track",x:2,y:2,rx:5,ry:5,fill:"none"}),Object(A.jsx)("rect",{className:"timer-progreso",x:2,y:2,rx:5,ry:5,fill:"none",strokeDashoffset:de-de/100*be})]}),Object(A.jsxs)(U,{children:[Object(A.jsxs)(Z,{children:[Object(A.jsxs)(q,{ref:ue,_css2:je,children:[G,Object(A.jsx)(X,{src:null!==o&&void 0!==o?o:h.a,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src=h.a},alt:"cliente"})]}),Object(A.jsx)(Y,{children:a})]}),Object(A.jsx)(_,{className:"email-arrow"}),Object(A.jsxs)(W,{position:"right",children:[Object(A.jsxs)($,{children:[ie,Object(A.jsx)(ee,{src:r,alt:"perfil"})]}),Object(A.jsx)(te,{children:t})]})]})]})},ne=r(10),ae=r(45),ie=r(41),oe=Object(f.d)(ae.a).withConfig({displayName:"CartasAdminContainer___StyledContainer",componentId:"rb4u26-0"})({width:"100%",height:"100%"}),ce=Object(f.d)("div").withConfig({displayName:"CartasAdminContainer___StyledDiv",componentId:"rb4u26-1"})(["",""],(function(e){return e._css}));t.default=function(e){var t,r=e.entidadSeleccionada,n=Object(ne.d)(["operadores"],T.fetchOperadores),a=n.data,i=n.status,o=function(e){var t=[];null===e||void 0===e||e.forEach((function(e){e.perfiles&&t.push.apply(t,Object(p.a)(e.perfiles))}));var r=t.map((function(e){return e.cartas.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{perfil:e,cliente:t.cliente,operadorId:e.operador.id})}))})).flat();return r.map((function(e){var t=e.id,r=e.read_timestamp,n=e.replied,a=e.timestamp,i=e.cliente,o=e.perfil,c=e.operadorId;return{id:t,perfilNombre:o.nombre,perfilFoto:o.foto,corazones:o.corazones,clienteNombre:i.nombre,clienteFoto:null===i||void 0===i?void 0:i.foto,coronas:i.coronas,clienteAmolatinaId:i.amolatinaId,tiempoLlegada:Math.floor(a/1e3),leida:!!r,respondida:n,operadorId:c}}))}(a);return"loading"===i?Object(A.jsx)(ie.a,{}):Object(A.jsxs)(oe,{children:[Object(A.jsx)(b.b,{position:"left",txt:"Cartas"}),Object(A.jsx)(ce,{_css:[{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:"2rem"},D.b],children:null===(t=o.filter((function(e){if("supervisor"!==r)return!0;var t,n=Object(d.a)(r.ids);try{for(n.s();!(t=n.n()).done;){var i=t.value;if((null===a||void 0===a?void 0:a.find((function(t){return t.id===e.operadorId})).supervisorId)===Number(i))return!0}}catch(o){n.e(o)}finally{n.f()}return!1})))||void 0===t?void 0:t.map((function(e){return Object(A.jsx)(re,Object(s.a)(Object(s.a)({},e),{},{timerDuracionMinutos:30}),e.id)}))})]})}}}]);