(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[22],{418:function(e,t,i){"use strict";i.r(t);var n,a,r,o,d,p,c=i(20),m=i(4),l=i(21),s=i(5),f=i(43),x=i(44),h=i(9),b=i(10),u=i(0),w=i(85),j=["title","titleId"];function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function v(e,t){var i=e.title,c=e.titleId,m=g(e,j);return u.createElement("svg",O({id:"b4a22bbc-cdd2-437b-b229-3a26676ab455","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 735.26 370",ref:t,"aria-labelledby":c},m),i?u.createElement("title",{id:c},i):null,n||(n=u.createElement("path",{d:"M497,370H15A15,15,0,0,1,0,355V15A15,15,0,0,1,15,0H497a15,15,0,0,1,15,15V355A15,15,0,0,1,497,370Z",fill:"#f79b00"})),a||(a=u.createElement("path",{d:"M497,0H256V370H497a15,15,0,0,0,15-15V15A15,15,0,0,0,497,0Z",fill:"#f28300"})),r||(r=u.createElement("path",{d:"M512,15A15,15,0,0,0,497,0H15A15,15,0,0,0,0,15v7.78L247.35,197.26a15,15,0,0,0,17.3,0L512,22.78Z",fill:"#fbb200"})),o||(o=u.createElement("path",{d:"M146.6,310H75a15,15,0,0,1,0-30h71.6a15,15,0,1,1,0,30Z",fill:"#fffff2"})),d||(d=u.createElement("path",{d:"M497,0H256V200a15,15,0,0,0,8.65-2.74L512,22.78V15A15,15,0,0,0,497,0Z",fill:"#f79b00"})),p||(p=u.createElement("polygon",{points:"630.99 85.73 606.4 110.32 686.08 190 606.4 269.68 630.99 294.27 735.26 190 630.99 85.73",fill:"#fff"})))}var y,C=u.forwardRef(v),z=(i.p,["title","titleId"]);function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function S(e,t){var i=e.title,n=e.titleId,a=I(e,z);return u.createElement("svg",_({id:"e5d591a6-4fca-4d72-9ccc-c114fcffa51f","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 384",ref:t,"aria-labelledby":n},a),i?u.createElement("title",{id:n},i):null,y||(y=u.createElement("path",{d:"M0,208.34,175.33,384,512,47.67,463.67,0,175.33,288,47.66,160.33Z",fill:"#fff"})))}var N,T,E,k=u.forwardRef(S),M=(i.p,i(6)),A=i(172),R=i(113),D=i(114),P=i(78),H=i(1),B=Object(s.d)(A.a).withConfig({displayName:"CartaTimer__CoronaSvg",componentId:"sc-1z12nby-0"})(["",""],P.a),V=Object(s.d)(R.a).withConfig({displayName:"CartaTimer__CorazonSvg",componentId:"sc-1z12nby-1"})(["",""],P.a),Z=Object(s.d)(D.a).withConfig({displayName:"CartaTimer__CorazonGreenSvg",componentId:"sc-1z12nby-2"})(["",""],P.a),F=s.d.div.withConfig({displayName:"CartaTimer__CartaTimerDiv",componentId:"sc-1z12nby-3"})(["position:relative;"," "," .email-arrow{@media (min-width:2560px){width:64px !important;}"," position:absolute;height:auto;top:25%;left:50%;transform:translate(-50%,20%);}"],Object(s.c)(N||(N=Object(b.a)(["\n    @media (min-width: 2560px) {\n      margin: 25px 16px !important;\n    }\n  "]))),{"@media (min-width: 768px)":{margin:"8px 4px"},"@media (min-width: 1024px)":{margin:"10px 8px"},"@media (min-width: 1280px)":{margin:"15px 12px"},"@media (min-width: 1536px)":{margin:"25px 16px"}},{"@media (min-width: 768px)":{width:"16px"},"@media (min-width: 1024px)":{width:"18px"},"@media (min-width: 1280px)":{width:"32px"},"@media (min-width: 1536px)":{width:"40px"}}),L=s.d.div.withConfig({displayName:"CartaTimer__CartaContent",componentId:"sc-1z12nby-4"})([""," "," display:flex;justify-content:space-between;align-items:center;"],Object(s.c)(T||(T=Object(b.a)(["\n    @media (min-width: 2560px) {\n      width: 320px !important;\n      padding: 28px 8px 16px 8px !important;\n    }\n  "]))),{"@media (min-width: 768px)":{width:"100px",padding:"7px 2px 4px 2px"},"@media (min-width: 1024px)":{width:"110px",padding:"7px 2px 4px 2px"},"@media (min-width: 1280px)":{width:"200px",padding:"21px 6px 12px 6px"},"@media (min-width: 1536px)":{width:"240px",padding:"14px 4px 8px 4px"}}),W=s.d.svg.withConfig({displayName:"CartaTimer__TimerSvg",componentId:"sc-1z12nby-5"})(["position:absolute;width:100%;height:100%;.timer-track{stroke:",";stroke-width:1px;width:calc(100% - 4px);height:calc(100% - 4px);}.timer-progreso{width:calc(100% - 4px);height:calc(100% - 4px);stroke:",";@media (min-width:2560px){stroke-width:4px;}"," stroke-dasharray:"," ",";}"],(function(e){var t=e.porcentaje;return t>66?"#1a2480":t>33?"#7e801a":"#801a1a"}),(function(e){var t=e.porcentaje;return t>66?"#3347ff":t>33?"#fcff33":"#ff3333"}),{"@media (min-width: 768px)":{stroke:"1px"},"@media (min-width: 1024px)":{stroke:"2px"},"@media (min-width: 1280px)":{stroke:"3px"}},(function(e){return e.perimetro}),(function(e){return e.perimetro})),J=s.d.span.withConfig({displayName:"CartaTimer__Tiempo",componentId:"sc-1z12nby-6"})(["@media (min-width:2560px){font-size:0.75rem !important;left:24px;top:-24px;}position:absolute;color:white;"," font-weight:300;"],{"@media (min-width: 768px)":{fontSize:"0.25rem",top:"-8px",left:"8px"},"@media (min-width: 1024px)":{fontSize:"0.32rem",top:"-12px",left:"12px"},"@media (min-width: 1280px)":{fontSize:"0.5rem",top:"-18px",left:"18px"},"@media (min-width: 1536px)":{fontSize:"0.6rem",top:"-24px",left:"24px"}}),G=Object(s.d)(k).withConfig({displayName:"CartaTimer__CheckMarkSvg",componentId:"sc-1z12nby-7"})(["position:absolute;"," height:auto;top:-22px;left:73px;"],{"@media (min-width: 768px)":{width:"4px"},"@media (min-width: 1024px)":{width:"6px"},"@media (min-width: 1280px)":{width:"8px"},"@media (min-width: 1536px)":{width:"12px"}}),q=s.d.div.withConfig({displayName:"CartaTimer__PicDiv",componentId:"sc-1z12nby-8"})(["position:relative;"]),K=Object(s.d)(q).withConfig({displayName:"CartaTimer___StyledPicDiv",componentId:"sc-1z12nby-9"})(["",""],(function(e){return e._css2})),Q=s.d.img.withConfig({displayName:"CartaTimer__Foto",componentId:"sc-1z12nby-10"})(["@media (min-width:2560px){width:64px !important;height:64px !important;}"," border-radius:100%;border:2px solid #17171c;object-fit:cover;margin-bottom:10px;"],{"@media (min-width: 768px)":{width:"16px",height:"16px"},"@media (min-width: 1024px)":{width:"24px",height:"24px"},"@media (min-width: 1280px)":{width:"32px",height:"32px"},"@media (min-width: 1536px)":{width:"40px",height:"40px"}}),U=s.d.span.withConfig({displayName:"CartaTimer__Nombre",componentId:"sc-1z12nby-11"})(["@media (min-width:2560px){font-size:0.75rem !important;}"," font-weight:300;color:white;"],{"@media (min-width: 768px)":{fontSize:"0.25rem"},"@media (min-width: 1024px)":{fontSize:"0.32rem"},"@media (min-width: 1280px)":{fontSize:"0.5rem"},"@media (min-width: 1536px)":{fontSize:"0.6rem"}}),X=s.d.div.withConfig({displayName:"CartaTimer__AvatarDiv",componentId:"sc-1z12nby-12"})(["@media (min-width:2560px){margin:0 24px;}"," ",""],{"@media (min-width: 768px)":{margin:"0 8px"},"@media (min-width: 1024px)":{margin:"0 8px"},"@media (min-width: 1280px)":{margin:"0 24px"},"@media (min-width: 1536px)":{margin:"0 24px"}},(function(e){return"right"===e.position?Object(s.c)(E||(E=Object(b.a)(["\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n        "]))):""})),Y=function(e){var t=e.perfilNombre,i=e.perfilFoto,n=e.corazones,a=e.clienteNombre,r=e.clienteFoto,o=void 0===r?w.a:r,d=e.coronas,p=e.clienteAmolatinaId,c=e.tiempoLlegada,m=e.leida,l=(e.respondida,e.timerDuracionMinutos),s=e.typeWidth,f=Object(u.useRef)(null),x=Object(u.useState)(0),b=Object(h.a)(x,2),j=b[0],O=b[1],g=Object(u.useState)(0),v=Object(h.a)(g,2),y=v[0],z=v[1],_=Object(u.useState)(Math.floor(c/60)+l-Math.floor(Date.now()/6e4)),I=Object(h.a)(_,2),S=I[0],N=I[1],T=Object(u.useState)(0),E=Object(h.a)(T,2),k=E[0],A=E[1],R=Object(u.useRef)(0),D=Object(u.useState)([]),P=Object(h.a)(D,2),Y=P[0],$=P[1],ee=Object(u.useState)([]),te=Object(h.a)(ee,2),ie=te[0],ne=te[1],ae=Object(u.useState)(1),re=Object(h.a)(ae,2),oe=re[0],de=re[1],pe=Object(u.useState)(100),ce=Object(h.a)(pe,2),me=ce[0],le=ce[1],se=Object(u.useRef)(),fe=Object(M.useCopyTextOnClick)(se,p);return Object(u.useEffect)((function(){$(Object(M.organizadorRadial)(B,12,32,40,d,11.25))}),[d]),Object(u.useEffect)((function(){var e=Object(M.reducirCorazones)(n,V,Z),t=Object(h.a)(e,2),i=t[0],a=t[1];ne("4k"===s?Object(M.organizadorRadial)(i,12,32,40,a,11.25):"2xl"===s?Object(M.organizadorRadial)(i,8,20,24,a,11.25):"xl"===s?Object(M.organizadorRadial)(i,6,16,19,a,11.25):"lg"===s?Object(M.organizadorRadial)(i,4,12,14,a,11.25):"md"===s?Object(M.organizadorRadial)(i,2,8,9,a,11.25):"")}),[n,s]),Object(u.useEffect)((function(){return R.current=setInterval((function(){var e=Math.floor(c)+60*l-Math.floor(Date.now()/1e3);N(Math.floor(e/60)),A(e-60*Math.floor(e/60)),e<=0&&(clearInterval(R.current),N(0),A(0))}),333),function(){clearInterval(R.current)}}),[]),Object(u.useEffect)((function(){O(f.current.getBBox().width),z(f.current.getBBox().height),de(2*(j-10)+2*(y-10)+2*Math.PI*5)}),[y,j]),Object(u.useEffect)((function(){le((k+60*S)/(60*l)*100)}),[S,k,l]),Object(H.jsxs)(F,{children:[Object(H.jsxs)(J,{children:[S<10?"0".concat(S):S,":",k<10?"0".concat(k):k]}),m?Object(H.jsx)(G,{}):null,Object(H.jsxs)(W,{ref:f,porcentaje:me,perimetro:oe,children:[Object(H.jsx)("rect",{className:"timer-track",x:2,y:2,rx:5,ry:5,fill:"none"}),Object(H.jsx)("rect",{className:"timer-progreso",x:2,y:2,rx:5,ry:5,fill:"none",strokeDashoffset:oe-oe/100*me})]}),Object(H.jsxs)(L,{children:[Object(H.jsxs)(X,{children:[Object(H.jsxs)(K,{ref:se,_css2:fe,children:[Y,Object(H.jsx)(Q,{src:null!==o&&void 0!==o?o:w.a,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src=w.a}})]}),Object(H.jsx)(U,{children:a})]}),Object(H.jsx)(C,{className:"email-arrow"}),Object(H.jsxs)(X,{position:"right",children:[Object(H.jsxs)(q,{children:[ie,Object(H.jsx)(Q,{src:i})]}),Object(H.jsx)(U,{children:t})]})]})]})},$=i(11),ee=s.d.div.withConfig({displayName:"CartasAdminContainer__CartasDiv",componentId:"rb4u26-0"})([""," ",""],{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap","@media (min-width: 768px)":{marginTop:"1.25rem"},"@media (min-width: 1024px)":{marginTop:"1.5rem"},"@media (min-width: 1280px)":{marginTop:"1.75rem"},"@media (min-width: 1536px)":{marginTop:"2rem"}},P.b),te=Object(s.d)(f.a).withConfig({displayName:"CartasAdminContainer___StyledContainer",componentId:"rb4u26-1"})({width:"100%",height:"100%"});t.default=function(e){var t,i=e.entidadSeleccionada,n=e.typeWidth,a=Object($.d)(["operadores"],M.fetchOperadores).data,r=function(e){var t=[];null===e||void 0===e||e.forEach((function(e){e.perfiles&&t.push.apply(t,Object(l.a)(e.perfiles))}));var i=t.map((function(e){return e.cartas.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{perfil:e,cliente:t.cliente,operadorId:e.operador.id})}))})).flat();return i.map((function(e){var t=e.id,i=e.read_timestamp,n=e.replied,a=e.timestamp,r=e.cliente,o=e.perfil,d=e.operadorId;return{id:t,perfilNombre:o.nombre,perfilFoto:o.foto,corazones:o.corazones,clienteNombre:r.nombre,clienteFoto:null===r||void 0===r?void 0:r.foto,coronas:r.coronas,clienteAmolatinaId:r.amolatinaId,tiempoLlegada:Math.floor(a/1e3),leida:!!i,respondida:n,operadorId:d}}))}(a);return Object(H.jsxs)(te,{children:[Object(H.jsx)(x.b,{position:"left",txt:"Cartas"}),Object(H.jsx)(ee,{children:null===(t=r.filter((function(e){if("supervisor"!==i)return!0;var t,n=Object(c.a)(i.ids);try{for(n.s();!(t=n.n()).done;){var r=t.value;if((null===a||void 0===a?void 0:a.find((function(t){return t.id===e.operadorId})).supervisorId)===Number(r))return!0}}catch(o){n.e(o)}finally{n.f()}return!1})))||void 0===t?void 0:t.map((function(e){return Object(H.jsx)(Y,Object(m.a)(Object(m.a)({typeWidth:n},e),{},{timerDuracionMinutos:30}),e.id)}))})]})}}}]);