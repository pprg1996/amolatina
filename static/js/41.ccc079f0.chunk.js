(this.webpackJsonpivan=this.webpackJsonpivan||[]).push([[41],{466:function(t,i,e){"use strict";e.r(i);var a,n,r,p,d,m,o=e(5),x=e(20),h=e(2),c=e.n(h),l=e(7),s=e(3),f=e(47),w=e(49),g=e(6),u=e(0),b=e(93),j=["title","titleId"];function O(){return(O=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}).apply(this,arguments)}function v(t,i){if(null==t)return{};var e,a,n=function(t,i){if(null==t)return{};var e,a,n={},r=Object.keys(t);for(a=0;a<r.length;a++)e=r[a],i.indexOf(e)>=0||(n[e]=t[e]);return n}(t,i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)e=r[a],i.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function y(t,i){var e=t.title,o=t.titleId,x=v(t,j);return u.createElement("svg",O({id:"b4a22bbc-cdd2-437b-b229-3a26676ab455","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 735.26 370",ref:i,"aria-labelledby":o},x),e?u.createElement("title",{id:o},e):null,a||(a=u.createElement("path",{d:"M497,370H15A15,15,0,0,1,0,355V15A15,15,0,0,1,15,0H497a15,15,0,0,1,15,15V355A15,15,0,0,1,497,370Z",fill:"#f79b00"})),n||(n=u.createElement("path",{d:"M497,0H256V370H497a15,15,0,0,0,15-15V15A15,15,0,0,0,497,0Z",fill:"#f28300"})),r||(r=u.createElement("path",{d:"M512,15A15,15,0,0,0,497,0H15A15,15,0,0,0,0,15v7.78L247.35,197.26a15,15,0,0,0,17.3,0L512,22.78Z",fill:"#fbb200"})),p||(p=u.createElement("path",{d:"M146.6,310H75a15,15,0,0,1,0-30h71.6a15,15,0,1,1,0,30Z",fill:"#fffff2"})),d||(d=u.createElement("path",{d:"M497,0H256V200a15,15,0,0,0,8.65-2.74L512,22.78V15A15,15,0,0,0,497,0Z",fill:"#f79b00"})),m||(m=u.createElement("polygon",{points:"630.99 85.73 606.4 110.32 686.08 190 606.4 269.68 630.99 294.27 735.26 190 630.99 85.73",fill:"#fff"})))}var C,z=u.forwardRef(y),_=(e.p,["title","titleId"]);function I(){return(I=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}).apply(this,arguments)}function S(t,i){if(null==t)return{};var e,a,n=function(t,i){if(null==t)return{};var e,a,n={},r=Object.keys(t);for(a=0;a<r.length;a++)e=r[a],i.indexOf(e)>=0||(n[e]=t[e]);return n}(t,i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)e=r[a],i.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function k(t,i){var e=t.title,a=t.titleId,n=S(t,_);return u.createElement("svg",I({id:"e5d591a6-4fca-4d72-9ccc-c114fcffa51f","data-name":"Capa 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 384",ref:i,"aria-labelledby":a},n),e?u.createElement("title",{id:a},e):null,C||(C=u.createElement("path",{d:"M0,208.34,175.33,384,512,47.67,463.67,0,175.33,288,47.66,160.33Z",fill:"#fff"})))}var N=u.forwardRef(k),R=(e.p,e(10)),T=e(51),E=e(29),M=e(1),D=Object(s.d)(T.a).withConfig({displayName:"CartaTimer__CoronaSvg",componentId:"sc-1z12nby-0"})(["",""],E.a),A=s.d.div.withConfig({displayName:"CartaTimer__CartaTimerDiv",componentId:"sc-1z12nby-1"})(["position:relative;@media (min-width:2560px){margin:25px 16px !important;}@media (min-height:1000px) and (max-width:767px){margin:25px 16px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){margin:25px 16px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){margin:25px 16px !important;}"," .email-arrow{@media (min-width:2560px){width:64px !important;}@media (min-height:1000px) and (max-width:767px){width:64px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){width:64px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){width:54px !important;}@media (max-width:400px) and (max-height:999px){width:26px !important;}"," position:absolute;height:auto;top:25%;left:50%;transform:translate(-50%,20%);}"],{margin:"15px 12px","@media (min-width: 768px)":{margin:"8px 4px"},"@media (min-width: 1024px)":{margin:"12px 4px"},"@media (min-width: 1280px)":{margin:"12px 4px"},"@media (min-width: 1536px)":{margin:"24px 4px"}},{width:"26px","@media (min-width: 768px)":{width:"16px"},"@media (min-width: 1024px)":{width:"20px"},"@media (min-width: 1280px)":{width:"24px"},"@media (min-width: 1536px)":{width:"28px"}}),P=Object(s.d)(A).withConfig({displayName:"CartaTimer___StyledCartaTimerDiv",componentId:"sc-1z12nby-11"})({borderRadius:"2rem","@media (min-width: 768px)":{borderRadius:"1rem"}}),H=s.d.div.withConfig({displayName:"CartaTimer__CartaContent",componentId:"sc-1z12nby-2"})(["@media (min-width:2560px){width:320px !important;padding:28px 8px 16px 8px !important;}@media (min-height:1000px) and (max-width:767px){width:320px !important;padding:28px 8px 16px 8px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){width:320px !important;padding:28px 8px 16px 8px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){width:320px !important;padding:28px 8px 16px 8px !important;}@media (max-width:400px) and (max-height:999px){width:200px !important;padding:12px 8px 8px 8px !important;}"," display:flex;justify-content:space-between;align-items:center;"],{padding:"12px 8px 8px 8px",width:"200px","@media (min-width: 768px)":{padding:"10px 2px 4px 2px",width:"110px"},"@media (min-width: 1024px)":{padding:"10px 2px 4px 2px",width:"130px"},"@media (min-width: 1280px)":{padding:"14px 6px 12px 6px",width:"175px"},"@media (min-width: 1536px)":{padding:"14px 4px 8px 4px",width:"195px"}}),B=s.d.svg.withConfig({displayName:"CartaTimer__TimerSvg",componentId:"sc-1z12nby-3"})(["position:absolute;width:100%;height:100%;.timer-track{stroke:",";stroke-width:1px;width:calc(100% - 4px);height:calc(100% - 4px);}.timer-progreso{width:calc(100% - 4px);height:calc(100% - 4px);stroke:",";@media (min-width:2560px){stroke-width:4px !important;}@media (min-height:1000px) and (max-width:767px){stroke-width:4px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){stroke-width:4px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){stroke-width:4px !important;}@media (max-width:400px) and (max-height:999px){stroke-width:1px !important;}"," stroke-dasharray:"," ",";}"],(function(t){var i=t.porcentaje;return i>66?"#1a2480":i>33?"#7e801a":"#801a1a"}),(function(t){var i=t.porcentaje;return i>66?"#3347ff":i>33?"#fcff33":"#ff3333"}),{stroke:"1px","@media (min-width: 1024px)":{stroke:"2px"},"@media (min-width: 1280px)":{stroke:"3px"}},(function(t){return t.perimetro}),(function(t){return t.perimetro})),V=s.d.span.withConfig({displayName:"CartaTimer__Tiempo",componentId:"sc-1z12nby-4"})(["@media (min-width:2560px){font-size:0.75rem !important;left:24px !important;top:-24px !important;}@media (min-height:1000px) and (max-width:767px){font-size:0.75rem !important;left:24px !important;top:-24px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){font-size:0.6rem !important;left:4px !important;top:-14px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){font-size:0.5rem !important;left:2px !important;top:-14px !important;}@media (max-width:400px) and (max-height:999px){font-size:0.4rem !important;left:2px !important;top:-8px !important;}position:absolute;color:white;"," font-weight:300;"],{fontSize:"0.3rem",top:"-6px",left:"6px","@media (min-width: 768px)":{fontSize:"0.25rem",top:"-6px",left:"6px"},"@media (min-width: 1024px)":{fontSize:"0.32rem",top:"-10px",left:"10px"},"@media (min-width: 1280px)":{fontSize:"0.5rem",top:"-15px",left:"15px"},"@media (min-width: 1536px)":{fontSize:"0.6rem",top:"-18px",left:"18px"}}),Z=Object(s.d)(N).withConfig({displayName:"CartaTimer__CheckMarkSvg",componentId:"sc-1z12nby-5"})(["@media (min-width:2560px){top:-22px !important;left:73px !important;width:12px !important;}@media (min-height:1000px) and (max-width:767px){top:-24px !important;left:73px !important;width:12px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){top:-15px !important;left:42px !important;width:12px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){top:-12px !important;left:35px !important;width:8px !important;}@media (max-width:400px) and (max-height:999px){top:-9px !important;left:30px !important;width:8px !important;}",""],{left:"30px",top:"-5px",width:"6px",height:"auto",position:"absolute","@media (min-width: 768px)":{width:"4px"},"@media (min-width: 1024px)":{left:"34px",top:"-9px",width:"6px"},"@media (min-width: 1280px)":{left:"48px",top:"-12px",width:"8px"},"@media (min-width: 1536px)":{left:"58px",top:"-16px",width:"12px"}}),F=s.d.div.withConfig({displayName:"CartaTimer__PicDiv",componentId:"sc-1z12nby-6"})(["position:relative;"]),L=Object(s.d)(F).withConfig({displayName:"CartaTimer___StyledPicDiv",componentId:"sc-1z12nby-7"})(["",""],(function(t){return t._css})),W=s.d.img.withConfig({displayName:"CartaTimer__Foto",componentId:"sc-1z12nby-8"})(["@media (min-width:2560px){width:64px !important;height:64px !important;}@media (min-height:1000px) and (max-width:767px){width:64px !important;height:64px !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){width:24px !important;height:24px !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){width:24px !important;height:24px !important;}@media (max-width:400px) and (max-height:999px){width:24px !important;height:24px !important;}"," border-radius:100%;border:2px solid #17171c;object-fit:cover;margin-bottom:10px;"],{width:"24px",height:"24px","@media (min-width: 768px)":{width:"20px",height:"20px"},"@media (min-width: 1024px)":{width:"24px",height:"24px"},"@media (min-width: 1280px)":{width:"28px",height:"28px"},"@media (min-width: 1536px)":{width:"32px",height:"32px"}}),J=s.d.span.withConfig({displayName:"CartaTimer__Nombre",componentId:"sc-1z12nby-9"})(["@media (min-width:2560px){font-size:0.75rem !important;}@media (min-height:1000px) and (max-width:767px){font-size:0.75rem !important;}@media (min-width:651px) and (max-width:767px) and (max-height:999px){font-size:0.75rem !important;}@media (min-width:401px) and (max-width:650px) and (max-height:999px){font-size:0.6rem !important;}@media (max-width:400px) and (max-height:999px){font-size:0.4rem !important;}"," font-weight:300;color:white;"],{fontSize:"0.25rem","@media (min-width: 768px)":{fontSize:"0.25rem"},"@media (min-width: 1024px)":{fontSize:"0.32rem"},"@media (min-width: 1280px)":{fontSize:"0.4rem"},"@media (min-width: 1536px)":{fontSize:"0.6rem"}}),Q=s.d.div.withConfig({displayName:"CartaTimer__AvatarDiv",componentId:"sc-1z12nby-10"})(["@media (min-width:2560px){margin:0 24px !important;}@media (min-height:1000px) and (max-width:767px){margin:0 24px !important;}",""],{margin:"0 8px",display:"flex",flexDirection:"column",alignItems:"center","@media (min-width: 768px)":{margin:"0 8px"},"@media (min-width: 1024px)":{margin:"0 8px"},"@media (min-width: 1280px)":{margin:"0 12px"},"@media (min-width: 1536px)":{margin:"0 12px"}}),q=function(t){var i=t.perfilNombre,e=t.perfilFoto,a=t.corazones,n=t.clienteNombre,r=t.clienteFoto,p=void 0===r?b.a:r,d=t.coronas,m=t.clienteAmolatinaId,o=t.tiempoLlegada,x=(t.leida,t.respondida,t.timerDuracionMinutos),h=t.typeWidth,c=(t.clienteId,Object(u.useRef)(null)),l=Object(u.useState)(0),s=Object(g.a)(l,2),f=s[0],w=s[1],j=Object(u.useState)(0),O=Object(g.a)(j,2),v=O[0],y=O[1],C=Object(u.useState)(Math.floor(o/60)+x-Math.floor(Date.now()/6e4)),_=Object(g.a)(C,2),I=_[0],S=_[1],k=Object(u.useState)(0),N=Object(g.a)(k,2),T=N[0],E=N[1],A=Object(u.useRef)(0),q=Object(u.useState)([]),G=Object(g.a)(q,2),K=G[0],U=G[1],X=Object(u.useState)([]),Y=Object(g.a)(X,2),$=Y[0],tt=Y[1],it=Object(u.useState)(1),et=Object(g.a)(it,2),at=et[0],nt=et[1],rt=Object(u.useState)(100),pt=Object(g.a)(rt,2),dt=pt[0],mt=pt[1],ot=Object(u.useRef)(),xt=Object(R.useCopyTextOnClick)(ot,m);return Object(u.useEffect)((function(){U("4k"===h?Object(R.organizadorRadial)(D,12,32,40,d,11.25):"2xl"===h?Object(R.organizadorRadial)(D,7,17,21,d,11.25):"xl"===h?Object(R.organizadorRadial)(D,5,14,16,d,11.25):"lg"===h?Object(R.organizadorRadial)(D,4,12,14,d,11.25):"md"===h?Object(R.organizadorRadial)(D,4,10,12,d,11.25):"sm"===h||""===h?Object(R.organizadorRadial)(D,4,12,14,20,11.25):"")}),[d,h]),Object(u.useEffect)((function(){var t=Object(R.reducirCorazones)(a);tt("4k"===h?Object(R.organizadorRadialCorazones)(12,32,40,t,11.25):"2xl"===h?Object(R.organizadorRadialCorazones)(7,17,21,t,11.25):"xl"===h?Object(R.organizadorRadialCorazones)(5,14,16,t,11.25):"lg"===h?Object(R.organizadorRadialCorazones)(4,12,14,t,11.25):"md"===h?Object(R.organizadorRadialCorazones)(4,10,12,t,11.25):"sm"===h||""===h?Object(R.organizadorRadialCorazones)(4,12,14,t,11.25):"")}),[a,h]),Object(u.useEffect)((function(){return A.current=setInterval((function(){var t=Math.floor(o)+60*x-Math.floor(Date.now()/1e3);S(Math.floor(t/60)),E(t-60*Math.floor(t/60)),t<=0&&(clearInterval(A.current),S(0),E(0))}),333),function(){clearInterval(A.current)}}),[]),Object(u.useEffect)((function(){w(c.current.getBBox().width),y(c.current.getBBox().height),nt(2*(f-10)+2*(v-10)+2*Math.PI*5)}),[v,f]),Object(u.useEffect)((function(){mt((T+60*I)/(60*x)*100)}),[I,T,x]),!0,Object(M.jsxs)(P,{children:[Object(M.jsxs)(V,{children:[I<10?"0".concat(I):I,":",T<10?"0".concat(T):T]}),Object(M.jsx)(Z,{}),Object(M.jsxs)(B,{ref:c,porcentaje:dt,perimetro:at,children:[Object(M.jsx)("rect",{className:"timer-track",x:2,y:2,rx:"4k"===h?50:"2xl"===h||"xl"===h?30:"lg"===h?15:10,ry:"4k"===h?50:"2xl"===h||"xl"===h?30:"lg"===h?15:10,fill:"none"}),Object(M.jsx)("rect",{className:"timer-progreso",x:2,y:2,rx:"4k"===h?50:"2xl"===h||"xl"===h?30:"lg"===h?15:10,ry:"4k"===h?50:"2xl"===h||"xl"===h?30:"lg"===h?15:10,fill:"none",strokeDashoffset:at-at/100*dt})]}),Object(M.jsxs)(H,{children:[Object(M.jsxs)(Q,{children:[Object(M.jsxs)(L,{ref:ot,_css:xt,children:[K,Object(M.jsx)(W,{src:null!==p&&void 0!==p?p:b.a,onError:function(t){var i=t.currentTarget;i.onerror=null,i.src=b.a}})]}),Object(M.jsx)(J,{children:n})]}),Object(M.jsx)(z,{className:"email-arrow"}),Object(M.jsxs)(Q,{position:"right",children:[Object(M.jsxs)(F,{children:[$,Object(M.jsx)(W,{src:e})]}),Object(M.jsx)(J,{children:i})]})]})]})},G=e(12),K=e(8),U=e.n(K),X=e(43),Y=s.d.div.withConfig({displayName:"CartasAdminContainer__CartasDiv",componentId:"rb4u26-0"})(["@media (min-width:2560px){margin-top:2rem !important;}"," ",""],{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:"0.5rem","@media (min-width: 1024px)":{marginTop:"0.75rem"},"@media (min-width: 1280px)":{marginTop:"1.75rem"},"@media (min-width: 1536px)":{marginTop:"2rem"}},E.b),$=function(){var t=Object(l.a)(c.a.mark((function t(i,e,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.customFetch)("/profiles/get-letters?agency_id=".concat(e,"&id=").concat(a));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(i,e,a){return t.apply(this,arguments)}}(),tt=Object(s.d)(f.a).withConfig({displayName:"CartasAdminContainer___StyledContainer",componentId:"rb4u26-1"})(["",""],(function(t){return t._css})),it=Object(s.d)(tt).withConfig({displayName:"CartasAdminContainer___Styled_StyledContainer",componentId:"rb4u26-2"})({width:"100%",height:"100%",borderRadius:"0.75rem","@media (min-width: 1024px)":{borderRadius:"1rem"},"@media (min-width: 1536px)":{borderRadius:"1.3rem"}});i.default=function(t){var i,e=t.entidadSeleccionada,a=t.typeWidth,n=U.a.get("role"),r=+U.a.get("id"),p=+U.a.get("agency_id"),d=G.b.getQueryData(["agency"]),m=Object(G.d)(["unreplied-letters",p,r],$,{refetchInterval:3e5,refetchOnMount:!1}),h=m.data,c=m.status,l=G.b.getQueryData(["operadores",(new Date).toISOString().slice(0,-14)]);return Object(M.jsxs)(it,{_css:["@media (min-width: 2560px) {border-radius: 2.5rem !important; }","@media (min-height: 1000px) and (max-width: 767px) { border-radius: 2.5rem !important; }"],children:[Object(M.jsx)(w.a,{position:"left",txt:"Cartas"}),Object(M.jsx)(Y,{children:"loading"===c?Object(M.jsx)(X.a,{}):Object(M.jsx)(M.Fragment,{children:null===h||void 0===h||null===(i=h.filter((function(t){return["shift","supervisor","admin"].includes(n)||t.operadorId===r})).filter((function(t){if("supervisor"!==e)return!0;var i,a=Object(x.a)(e.ids);try{for(a.s();!(i=a.n()).done;){var n=i.value;if((null===l||void 0===l?void 0:l.find((function(i){return i.id===t.operadorId})).supervisorId)===Number(n))return!0}}catch(r){a.e(r)}finally{a.f()}return!1})))||void 0===i?void 0:i.map((function(t){var i,e=null===l||void 0===l?void 0:l.find((function(i){return(null===i||void 0===i?void 0:i.id)===(null===t||void 0===t?void 0:t.operadorId)})),n=null===d||void 0===d?void 0:d.find((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.agency_id)}));return Object(M.jsx)(q,Object(o.a)(Object(o.a)({typeWidth:a},t),{},{timerDuracionMinutos:null!==(i=null===n||void 0===n?void 0:n.finesletter)&&void 0!==i?i:30}),t.id)}))})})]})}}}]);